(()=>{"use strict";const e=window.wp.element,t=window.React;function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},a.apply(this,arguments)}var n;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const r="popstate";function l(e,t){if(!1===e||null==e)throw new Error(t)}function s(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function o(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function i(e){let{pathname:t="/",search:a="",hash:n=""}=e;return a&&"?"!==a&&(t+="?"===a.charAt(0)?a:"?"+a),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function m(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substr(a),e=e.substr(0,a));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var d;function u(e,t,a){return void 0===a&&(a="/"),function(e,t,a,n){let r=C(("string"==typeof t?m(t):t).pathname||"/",a);if(null==r)return null;let l=p(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,a)=>e===t[a])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(l);let s=null;for(let e=0;null==s&&e<l.length;++e){let t=k(r);s=w(l[e],t,n)}return s}(e,t,a,!1)}function p(e,t,a,n){void 0===t&&(t=[]),void 0===a&&(a=[]),void 0===n&&(n="");let r=(e,r,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};o.relativePath.startsWith("/")&&(l(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(n.length));let c=P([n,o.relativePath]),i=a.concat(o);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+c+'".'),p(e.children,t,i,c)),(null!=e.path||e.index)&&t.push({path:c,score:N(c,e.index),routesMeta:i})};return e.forEach((e,t)=>{var a;if(""!==e.path&&null!=(a=e.path)&&a.includes("?"))for(let a of h(e.path))r(e,t,a);else r(e,t)}),t}function h(e){let t=e.split("/");if(0===t.length)return[];let[a,...n]=t,r=a.endsWith("?"),l=a.replace(/\?$/,"");if(0===n.length)return r?[l,""]:[l];let s=h(n.join("/")),o=[];return o.push(...s.map(e=>""===e?l:[l,e].join("/"))),r&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(d||(d={})),new Set(["lazy","caseSensitive","path","id","index","children"]);const g=/^:[\w-]+$/,x=3,y=2,b=1,f=10,v=-2,E=e=>"*"===e;function N(e,t){let a=e.split("/"),n=a.length;return a.some(E)&&(n+=v),t&&(n+=y),a.filter(e=>!E(e)).reduce((e,t)=>e+(g.test(t)?x:""===t?b:f),n)}function w(e,t,a){void 0===a&&(a=!1);let{routesMeta:n}=e,r={},l="/",s=[];for(let e=0;e<n.length;++e){let o=n[e],c=e===n.length-1,i="/"===l?t:t.slice(l.length)||"/",m=S({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},i),d=o.route;if(!m&&c&&a&&!n[n.length-1].route.index&&(m=S({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},i)),!m)return null;Object.assign(r,m.params),s.push({params:r,pathname:P([l,m.pathname]),pathnameBase:R(P([l,m.pathnameBase])),route:d}),"/"!==m.pathnameBase&&(l=P([l,m.pathnameBase]))}return s}function S(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[a,n]=function(e,t,a){void 0===t&&(t=!1),void 0===a&&(a=!0),s("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,a)=>(n.push({paramName:t,isOptional:null!=a}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),r=t.match(a);if(!r)return null;let l=r[0],o=l.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:n.reduce((e,t,a)=>{let{paramName:n,isOptional:r}=t;if("*"===n){let e=c[a]||"";o=l.slice(0,l.length-e.length).replace(/(.)\/+$/,"$1")}const s=c[a];return e[n]=r&&!s?void 0:(s||"").replace(/%2F/g,"/"),e},{}),pathname:l,pathnameBase:o,pattern:e}}function k(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return s(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function C(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,n=e.charAt(a);return n&&"/"!==n?null:e.slice(a)||"/"}function A(e,t,a,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+a+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function _(e,t){let a=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?a.map((e,t)=>t===a.length-1?e.pathname:e.pathnameBase):a.map(e=>e.pathnameBase)}function H(e,t,n,r){let s;void 0===r&&(r=!1),"string"==typeof e?s=m(e):(s=a({},e),l(!s.pathname||!s.pathname.includes("?"),A("?","pathname","search",s)),l(!s.pathname||!s.pathname.includes("#"),A("#","pathname","hash",s)),l(!s.search||!s.search.includes("#"),A("#","search","hash",s)));let o,c=""===e||""===s.pathname,i=c?"/":s.pathname;if(null==i)o=n;else{let e=t.length-1;if(!r&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}o=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:a,search:n="",hash:r=""}="string"==typeof e?m(e):e,l=a?a.startsWith("/")?a:function(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?a.length>1&&a.pop():"."!==e&&a.push(e)}),a.length>1?a.join("/"):"/"}(a,t):t;return{pathname:l,search:j(n),hash:T(r)}}(s,o),u=i&&"/"!==i&&i.endsWith("/"),p=(c||"."===i)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!p||(d.pathname+="/"),d}const P=e=>e.join("/").replace(/\/\/+/g,"/"),R=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",T=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const L=["post","put","patch","delete"],D=(new Set(L),["get",...L]);function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},U.apply(this,arguments)}new Set(D),new Set([301,302,303,307,308]),new Set([307,308]),Symbol("deferred");const M=t.createContext(null),O=t.createContext(null),$=t.createContext(null),B=t.createContext(null),I=t.createContext({outlet:null,matches:[],isDataRoute:!1}),W=t.createContext(null);function q(){return null!=t.useContext(B)}function z(){return q()||l(!1),t.useContext(B).location}function F(e){t.useContext($).static||t.useLayoutEffect(e)}function V(){let{isDataRoute:e}=t.useContext(I);return e?function(){let{router:e}=function(){let e=t.useContext(M);return e||l(!1),e}(Q.UseNavigateStable),a=te(ee.UseNavigateStable),n=t.useRef(!1);return F(()=>{n.current=!0}),t.useCallback(function(t,r){void 0===r&&(r={}),n.current&&("number"==typeof t?e.navigate(t):e.navigate(t,U({fromRouteId:a},r)))},[e,a])}():function(){q()||l(!1);let e=t.useContext(M),{basename:a,future:n,navigator:r}=t.useContext($),{matches:s}=t.useContext(I),{pathname:o}=z(),c=JSON.stringify(_(s,n.v7_relativeSplatPath)),i=t.useRef(!1);return F(()=>{i.current=!0}),t.useCallback(function(t,n){if(void 0===n&&(n={}),!i.current)return;if("number"==typeof t)return void r.go(t);let l=H(t,JSON.parse(c),o,"path"===n.relative);null==e&&"/"!==a&&(l.pathname="/"===l.pathname?a:P([a,l.pathname])),(n.replace?r.replace:r.push)(l,n.state,n)},[a,r,c,o,e])}()}function J(e,a){let{relative:n}=void 0===a?{}:a,{future:r}=t.useContext($),{matches:l}=t.useContext(I),{pathname:s}=z(),o=JSON.stringify(_(l,r.v7_relativeSplatPath));return t.useMemo(()=>H(e,JSON.parse(o),s,"path"===n),[e,o,s,n])}function X(e,a,r,s){q()||l(!1);let{navigator:o}=t.useContext($),{matches:c}=t.useContext(I),i=c[c.length-1],d=i?i.params:{},p=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;let h,g=z();if(a){var x;let e="string"==typeof a?m(a):a;"/"===p||(null==(x=e.pathname)?void 0:x.startsWith(p))||l(!1),h=e}else h=g;let y=h.pathname||"/",b=y;if("/"!==p){let e=p.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let f=u(e,{pathname:b}),v=function(e,a,n,r){var s;if(void 0===a&&(a=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===a.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let c=e,i=null==(s=n)?void 0:s.errors;if(null!=i){let e=c.findIndex(e=>e.route.id&&void 0!==(null==i?void 0:i[e.route.id]));e>=0||l(!1),c=c.slice(0,Math.min(c.length,e+1))}let m=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let e=0;e<c.length;e++){let t=c[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(d=e),t.route.id){let{loaderData:e,errors:a}=n,r=t.route.loader&&void 0===e[t.route.id]&&(!a||void 0===a[t.route.id]);if(t.route.lazy||r){m=!0,c=d>=0?c.slice(0,d+1):[c[0]];break}}}return c.reduceRight((e,r,l)=>{let s,o=!1,u=null,p=null;var h;n&&(s=i&&r.route.id?i[r.route.id]:void 0,u=r.route.errorElement||K,m&&(d<0&&0===l?(ae[h="route-fallback"]||(ae[h]=!0),o=!0,p=null):d===l&&(o=!0,p=r.route.hydrateFallbackElement||null)));let g=a.concat(c.slice(0,l+1)),x=()=>{let a;return a=s?u:o?p:r.route.Component?t.createElement(r.route.Component,null):r.route.element?r.route.element:e,t.createElement(Z,{match:r,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:a})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===l)?t.createElement(Y,{location:n.location,revalidation:n.revalidation,component:u,error:s,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}(f&&f.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:P([p,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:P([p,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),c,r,s);return a&&v?t.createElement(B.Provider,{value:{location:U({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:n.Pop}},v):v}function G(){let e=function(){var e;let a=t.useContext(W),n=function(){let e=t.useContext(O);return e||l(!1),e}(ee.UseRouteError),r=te(ee.UseRouteError);return void 0!==a?a:null==(e=n.errors)?void 0:e[r]}(),a=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},a),n?t.createElement("pre",{style:r},n):null,null)}const K=t.createElement(G,null);class Y extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(I.Provider,{value:this.props.routeContext},t.createElement(W.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Z(e){let{routeContext:a,match:n,children:r}=e,l=t.useContext(M);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(I.Provider,{value:a},r)}var Q=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Q||{}),ee=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ee||{});function te(e){let a=function(){let e=t.useContext(I);return e||l(!1),e}(),n=a.matches[a.matches.length-1];return n.route.id||l(!1),n.route.id}const ae={};function ne(e){let{to:a,replace:n,state:r,relative:s}=e;q()||l(!1);let{future:o,static:c}=t.useContext($),{matches:i}=t.useContext(I),{pathname:m}=z(),d=V(),u=H(a,_(i,o.v7_relativeSplatPath),m,"path"===s),p=JSON.stringify(u);return t.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function re(e){l(!1)}function le(e){let{basename:a="/",children:r=null,location:s,navigationType:o=n.Pop,navigator:c,static:i=!1,future:d}=e;q()&&l(!1);let u=a.replace(/^\/*/,"/"),p=t.useMemo(()=>({basename:u,navigator:c,static:i,future:U({v7_relativeSplatPath:!1},d)}),[u,d,c,i]);"string"==typeof s&&(s=m(s));let{pathname:h="/",search:g="",hash:x="",state:y=null,key:b="default"}=s,f=t.useMemo(()=>{let e=C(h,u);return null==e?null:{location:{pathname:e,search:g,hash:x,state:y,key:b},navigationType:o}},[u,h,g,x,y,b,o]);return null==f?null:t.createElement($.Provider,{value:p},t.createElement(B.Provider,{children:r,value:f}))}function se(e){let{children:t,location:a}=e;return X(oe(t),a)}function oe(e,a){void 0===a&&(a=[]);let n=[];return t.Children.forEach(e,(e,r)=>{if(!t.isValidElement(e))return;let s=[...a,r];if(e.type===t.Fragment)return void n.push.apply(n,oe(e.props.children,s));e.type!==re&&l(!1),e.props.index&&e.props.children&&l(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=oe(e.props.children,s)),n.push(o)}),n}t.startTransition,new Promise(()=>{}),t.Component;const ce=window.ReactDOM;function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ie.apply(this,arguments)}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const me=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(e){}new Map;const de=t.startTransition;function ue(e){let{basename:d,children:u,future:p,window:h}=e,g=t.useRef();var x;null==g.current&&(g.current=(void 0===(x={window:h,v5Compat:!0})&&(x={}),function(e,t,s,m){void 0===m&&(m={});let{window:d=document.defaultView,v5Compat:u=!1}=m,p=d.history,h=n.Pop,g=null,x=y();function y(){return(p.state||{idx:null}).idx}function b(){h=n.Pop;let e=y(),t=null==e?null:e-x;x=e,g&&g({action:h,location:v.location,delta:t})}function f(e){let t="null"!==d.location.origin?d.location.origin:d.location.href,a="string"==typeof e?e:i(e);return a=a.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+a),new URL(a,t)}null==x&&(x=0,p.replaceState(a({},p.state,{idx:x}),""));let v={get action(){return h},get location(){return e(d,p)},listen(e){if(g)throw new Error("A history only accepts one active listener");return d.addEventListener(r,b),g=e,()=>{d.removeEventListener(r,b),g=null}},createHref:e=>t(d,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){h=n.Push;let a=c(v.location,e,t);s&&s(a,e),x=y()+1;let r=o(a,x),l=v.createHref(a);try{p.pushState(r,"",l)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;d.location.assign(l)}u&&g&&g({action:h,location:v.location,delta:1})},replace:function(e,t){h=n.Replace;let a=c(v.location,e,t);s&&s(a,e),x=y();let r=o(a,x),l=v.createHref(a);p.replaceState(r,"",l),u&&g&&g({action:h,location:v.location,delta:0})},go:e=>p.go(e)};return v}(function(e,t){let{pathname:a="/",search:n="",hash:r=""}=m(e.location.hash.substr(1));return a.startsWith("/")||a.startsWith(".")||(a="/"+a),c("",{pathname:a,search:n,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let a=e.document.querySelector("base"),n="";if(a&&a.getAttribute("href")){let t=e.location.href,a=t.indexOf("#");n=-1===a?t:t.slice(0,a)}return n+"#"+("string"==typeof t?t:i(t))},function(e,t){s("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},x)));let y=g.current,[b,f]=t.useState({action:y.action,location:y.location}),{v7_startTransition:v}=p||{},E=t.useCallback(e=>{v&&de?de(()=>f(e)):f(e)},[f,v]);return t.useLayoutEffect(()=>y.listen(E),[y,E]),t.useEffect(()=>{return null==(e=p)||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),void(t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation));var e,t},[p]),t.createElement(le,{basename:d,children:u,location:b.location,navigationType:b.action,navigator:y,future:p})}ce.flushSync,t.useId;const pe="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,he=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ge=t.forwardRef(function(e,a){let n,{onClick:r,relative:s,reloadDocument:o,replace:c,state:m,target:d,to:u,preventScrollReset:p,viewTransition:h}=e,g=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,me),{basename:x}=t.useContext($),y=!1;if("string"==typeof u&&he.test(u)&&(n=u,pe))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),a=C(t.pathname,x);t.origin===e.origin&&null!=a?u=a+t.search+t.hash:y=!0}catch(e){}let b=function(e,a){let{relative:n}=void 0===a?{}:a;q()||l(!1);let{basename:r,navigator:s}=t.useContext($),{hash:o,pathname:c,search:i}=J(e,{relative:n}),m=c;return"/"!==r&&(m="/"===c?r:P([r,c])),s.createHref({pathname:m,search:i,hash:o})}(u,{relative:s}),f=function(e,a){let{target:n,replace:r,state:l,preventScrollReset:s,relative:o,viewTransition:c}=void 0===a?{}:a,m=V(),d=z(),u=J(e,{relative:o});return t.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,n)){t.preventDefault();let a=void 0!==r?r:i(d)===i(u);m(e,{replace:a,state:l,preventScrollReset:s,relative:o,viewTransition:c})}},[d,m,u,r,l,n,e,s,o,c])}(u,{replace:c,state:m,target:d,preventScrollReset:p,relative:s,viewTransition:h});return t.createElement("a",ie({},g,{href:n||b,onClick:y||o?r:function(e){r&&r(e),e.defaultPrevented||f(e)},ref:a,target:d}))});var xe,ye;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(xe||(xe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ye||(ye={}));const be=(...e)=>e.filter((e,t,a)=>Boolean(e)&&a.indexOf(e)===t).join(" ");var fe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ve=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:l="",children:s,iconNode:o,...c},i)=>(0,t.createElement)("svg",{ref:i,...fe,width:a,height:a,stroke:e,strokeWidth:r?24*Number(n)/Number(a):n,className:be("lucide",l),...c},[...o.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(s)?s:[s]])),Ee=(e,a)=>{const n=(0,t.forwardRef)(({className:n,...r},l)=>{return(0,t.createElement)(ve,{ref:l,iconNode:a,className:be(`lucide-${s=e,s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var s});return n.displayName=`${e}`,n},Ne=Ee("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),we=Ee("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]),Se=Ee("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]),ke=Ee("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ce=Ee("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Ae=Ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_e=({to:t,children:a})=>{const n=z(),r="/"===t?"/"===n.pathname:n.pathname===t;return(0,e.createElement)(ge,{className:"px-4 py-2 rounded-[5px] text-sm font-medium inline-flex items-center gap-2 "+(r?"bg-slate-900 text-white shadow":"text-slate-700 hover:bg-slate-100"),to:t},a)},He=({children:t})=>{const a="undefined"!=typeof NHSA&&NHSA.options&&(NHSA.options.gumroad_status||NHSA.options.license_status)||"inactive",n="undefined"!=typeof NHSA&&NHSA.options&&(NHSA.options.gumroad_trial_end||"")||"",[r,l]=(0,e.useState)(a),[s,o]=(0,e.useState)(n),c=!("active"===r||"trial"===r);return(0,e.useEffect)(()=>{function e(e){e&&e.detail&&(e.detail.status&&l(e.detail.status),void 0!==e.detail.trialEnd&&o(e.detail.trialEnd||""))}window.addEventListener("nhsa-license-updated",e);let t=null;return t=setTimeout(function e(){try{const a="undefined"!=typeof NHSA&&NHSA.ajax?NHSA.ajax:ajaxurl,n="undefined"!=typeof NHSA&&NHSA.nonce?NHSA.nonce:"",r=new URLSearchParams;r.set("action","nhsa_whoami"),r.set("nonce",n),fetch(a,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(e=>e.ok?e.json():null).then(e=>{e&&e.success&&e.data&&"undefined"!=typeof NHSA&&(e.data.caps&&(NHSA.currentUserCaps=e.data.caps),e.data.rest&&(NHSA.rest=e.data.rest))}).catch(()=>{}).finally(()=>{t=setTimeout(e,1e4)})}catch(a){t=setTimeout(e,1e4)}},1e4),()=>{window.removeEventListener("nhsa-license-updated",e),t&&clearTimeout(t)}},[]),(0,e.createElement)("div",{className:"nhsa-admin font-sans text-base"},(0,e.createElement)("div",{className:"max-w-6xl mx-auto p-4 "+(c?"relative":"")},(0,e.createElement)("div",{className:"flex items-center justify-between mb-6"},(0,e.createElement)("h1",{className:"text-2xl font-bold"},"NicheHotel Sync")),(()=>{const t=r;if("trial"===t){const t=s||"undefined"!=typeof NHSA&&NHSA.options&&NHSA.options.gumroad_trial_end||"",a=t?new Date(t):null,n=new Date,r=a?Math.ceil((a.getTime()-n.getTime())/864e5):null,l=null!==r?r>0?String(r):"0":"";return(0,e.createElement)("div",{className:"mb-3 p-3 rounded-[5px] bg-emerald-50 border border-emerald-200 flex items-center justify-between gap-3"},(0,e.createElement)("div",{className:"text-sm text-emerald-800"},"Free trial active",""!==l?` — ${l} day${"1"===l?"":"s"} left`:"","."),(0,e.createElement)("a",{href:"https://pinoyvaautomation.gumroad.com/l/NicheHotelSyncAI",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-emerald-600 text-white rounded-[5px] font-medium"},"Upgrade"))}return"active"!==t?(0,e.createElement)("div",{className:"mb-3 p-3 rounded-[5px] bg-slate-50 border border-slate-200 flex items-center justify-between gap-3"},(0,e.createElement)("div",{className:"text-sm text-slate-700"},"Unlock premium features — start your free trial now."),(0,e.createElement)("a",{href:"https://pinoyvaautomation.gumroad.com/l/NicheHotelSyncAI",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-[#ffd126] text-[#00488a] rounded-[5px] font-medium"},"Start free trial")):null})(),(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-2 mb-6 "+(c?"opacity-50 pointer-events-none":"")},(0,e.createElement)("nav",{className:"flex items-center justify-between gap-2"},(0,e.createElement)("div",{className:"flex gap-2"},"undefined"!=typeof NHSA&&NHSA.currentUserCaps&&NHSA.currentUserCaps.manage_settings&&(0,e.createElement)(_e,{to:"/"},(0,e.createElement)(Ne,{className:"w-4 h-4"}),(0,e.createElement)("span",null,"Dashboard")),"undefined"!=typeof NHSA&&NHSA.currentUserCaps&&NHSA.currentUserCaps.edit_bookings&&(0,e.createElement)(_e,{to:"/bookings"},(0,e.createElement)(we,{className:"w-4 h-4"}),(0,e.createElement)("span",null,"Bookings")),"undefined"!=typeof NHSA&&NHSA.currentUserCaps&&NHSA.currentUserCaps.manage_settings&&(0,e.createElement)(_e,{to:"/rooms"},(0,e.createElement)(Se,{className:"w-4 h-4"}),(0,e.createElement)("span",null,"Hotels & Rooms")),"undefined"!=typeof NHSA&&NHSA.currentUserCaps&&NHSA.currentUserCaps.manage_settings&&(0,e.createElement)(_e,{to:"/automation"},(0,e.createElement)(ke,{className:"w-4 h-4"}),(0,e.createElement)("span",null,"Automation")),"undefined"!=typeof NHSA&&NHSA.currentUserCaps&&NHSA.currentUserCaps.view_logs&&(0,e.createElement)(_e,{to:"/activity-logs"},(0,e.createElement)(Ce,{className:"w-4 h-4"}),(0,e.createElement)("span",null,"Activity Logs"))),(0,e.createElement)("div",{className:"flex gap-2 ml-auto"},"undefined"!=typeof NHSA&&NHSA.currentUserCaps&&NHSA.currentUserCaps.manage_settings&&(0,e.createElement)(_e,{to:"/settings"},(0,e.createElement)(Ae,{className:"w-4 h-4"}),(0,e.createElement)("span",null,"Settings"))))),(0,e.createElement)("div",{className:c?"opacity-50 pointer-events-none":""},t),c&&(0,e.createElement)("div",{className:"absolute inset-0 z-40 bg-white/60 backdrop-blur-[1px]"})))},Pe=({data:t=[],color:a="stroke-slate-700"})=>{if(!t||0===t.length)return(0,e.createElement)("svg",{width:160,height:48});const n=Math.max(...t,1),r=152/(t.length-1||1),l=t.map((e,t)=>[4+t*r,44-e/n*40]).map((e,t)=>0===t?`M ${e[0]} ${e[1]}`:`L ${e[0]} ${e[1]}`).join(" ");return(0,e.createElement)("svg",{width:160,height:48,className:"overflow-visible"},(0,e.createElement)("path",{d:l,className:`${a} fill-none`,strokeWidth:"2"}))},Re=({data:t=[],color:a="fill-slate-700"})=>{const n=Math.max(...t,1),r=Math.max(2,Math.floor(152/(t.length||1)-2));return(0,e.createElement)("svg",{width:160,height:48,className:"overflow-visible"},t.map((t,l)=>{const s=t/n*40,o=4+l*(r+2),c=44-s;return(0,e.createElement)("rect",{key:l,x:o,y:c,width:r,height:s,className:a,rx:"2"})}))},je=()=>{const[t,a]=(0,e.useState)(!0),[n,r]=(0,e.useState)({totalRooms:0,availableRooms:0,days:[],occupancy:[],checkins:[],checkouts:[]});(0,e.useEffect)(()=>{let e=!1;return(async()=>{try{const t=new URLSearchParams({action:"nhsa_admin_dashboard_metrics",nonce:NHSA.nonce}),a=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),n=await a.json();!e&&n?.success&&r(n.data)}finally{e||a(!1)}})(),()=>{e=!0}},[]);const l=n.checkins[0]||0,s=n.checkouts[0]||0,o=n.totalRooms>0?Math.round((n.occupancy[0]||0)/n.totalRooms*100):0;return(0,e.createElement)("div",{className:"grid grid-cols-1 gap-4"},(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4 flex-1"},(0,e.createElement)("div",{className:"text-slate-500 text-sm"},"Occupancy"),(0,e.createElement)("div",{className:"text-3xl font-bold mt-2"},o,"%"),(0,e.createElement)("div",{className:"mt-2"},(0,e.createElement)(Pe,{data:n.occupancy,color:"stroke-emerald-600"}))),(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4 flex-1"},(0,e.createElement)("div",{className:"text-slate-500 text-sm"},"Today's Check-ins"),(0,e.createElement)("div",{className:"text-3xl font-bold mt-2"},l),(0,e.createElement)("div",{className:"mt-2"},(0,e.createElement)(Re,{data:n.checkins,color:"fill-blue-600"}))),(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4 flex-1"},(0,e.createElement)("div",{className:"text-slate-500 text-sm"},"Today's Check-outs"),(0,e.createElement)("div",{className:"text-3xl font-bold mt-2"},s),(0,e.createElement)("div",{className:"mt-2"},(0,e.createElement)(Re,{data:n.checkouts,color:"fill-slate-600"})))),(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4"},(0,e.createElement)("div",{className:"text-slate-500 text-sm mb-1"},"Inventory"),(0,e.createElement)("div",{className:"text-lg font-semibold"},n.availableRooms," available / ",n.totalRooms," total rooms")))},Te=()=>{const[t,a]=(0,e.useState)([]),[n,r]=(0,e.useState)(!0),[l,s]=(0,e.useState)(""),[o,c]=(0,e.useState)([]),[i,m]=(0,e.useState)(""),[d,u]=(0,e.useState)(!1),[p,h]=(0,e.useState)(""),[g,x]=(0,e.useState)(""),[y,b]=(0,e.useState)(""),[f,v]=(0,e.useState)({open:!1,bookingId:null}),[E,N]=(0,e.useState)([]),[w,S]=(0,e.useState)(!1),[k,C]=(0,e.useState)({guest:"",salutation:"",firstName:"",lastName:"",gender:"",birth:"",nationality:"",email:"",phone:"",arrivalWindow:"",payment:"",paymentMethod:"",paymentRef:"",hotel_id:"",room_type:"",room_qty:1,checkin:"",checkout:"",guests:1,notes:"",specifyPerRoom:!1}),[A,_]=(0,e.useState)({}),[H,P]=(0,e.useState)([]),[R,j]=(0,e.useState)({}),[T,L]=(0,e.useState)({}),[D,U]=(0,e.useState)([]),[M,O]=(0,e.useState)([]),[$,B]=(0,e.useState)([]),[I,W]=(0,e.useState)(!1),[q,z]=(0,e.useState)([]),[F,V]=(0,e.useState)(!1),[J,X]=(0,e.useState)(!1),[G,K]=(0,e.useState)(null),[Y,Z]=(0,e.useState)(!1),[Q,ee]=(0,e.useState)(null),[te,ae]=(0,e.useState)(null),[ne,re]=(0,e.useState)(0),[le,se]=(0,e.useState)(null),[oe,ce]=(0,e.useState)({}),[ie,me]=(0,e.useState)({}),[de,ue]=(0,e.useState)(0),[pe,he]=(0,e.useState)(!1);async function ge(){const e=new URLSearchParams({action:"nhsa_admin_list_hotels",nonce:NHSA.nonce}),t=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),a=await t.json();c(a?.data?.hotels||[])}async function xe(e={}){const t=new URLSearchParams({action:"nhsa_admin_list_bookings",nonce:NHSA.nonce,...e}),n=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),r=await n.json();r?.success&&a(r.data.bookings||[])}async function ye(e){e?.preventDefault?.(),u(!0),await xe({guest:l,hotel_id:i,status:p,from:g,to:y}),u(!1),N([]),X(!1),V(!1)}function be(e){const t=e=>String(e).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}`}function fe(e,t){if(!e||!t)return 0;const a=new Date(e),n=new Date(t),r=Math.floor((n-a)/864e5);return r>0?r:0}async function ve(e,t){u(!0);const a=new URLSearchParams({action:"nhsa_admin_update_booking_status",nonce:NHSA.nonce,id:String(e),status:t});await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a}),await xe({guest:l,hotel_id:i,status:t,from:g,to:y}),u(!1)}async function Ee(e){if(0===E.length)return;u(!0);const t=new URLSearchParams({action:"nhsa_admin_bulk_update_booking_status",nonce:NHSA.nonce,status:e});E.forEach(e=>t.append("ids[]",String(e))),await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),await xe({guest:l,hotel_id:i,status:p,from:g,to:y}),u(!1),N([]),V(!1)}function Ne(e){return String(e||"").replace(/[\-_]+/g," ").trim().toLowerCase().split(" ").filter(Boolean).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}async function we(e){if(!e)return _({}),P([]),void C(e=>({...e,room_type:""}));const t=new URLSearchParams({action:"nhsa_admin_list_rooms",nonce:NHSA.nonce,hotel_id:String(e)}),a=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),n=await a.json(),r=n?.data?.rooms||[];if(!Array.isArray(r)||0===r.length)return _({}),P([]),C(e=>({...e,room_type:""})),void j({});const l={},s={},o={},c={};r.forEach(e=>{const t=String(e.room_type||"").trim();if(!t)return;const a=t.toLowerCase();l[a]||(l[a]=t),o[a]||(o[a]=[]),"available"===(e.status||"available")&&o[a].push({id:e.id,number:e.number,price:Number(e.price||0)}),(e.price||0)>0&&void 0===c[a]&&(c[a]=Number(e.price)||0),"available"===(e.status||"available")&&(s[a]=(s[a]||0)+1)}),_(s),j(o);let i=Object.entries(s).filter(([,e])=>(e||0)>0).map(([e,t])=>{const a=l[e]||e;return{value:a,label:Ne(a),count:t,price:c[e]||0}});0===i.length&&(i=Object.keys(l).map(e=>{const t=l[e]||e,a=s[e]||0;return{value:t,label:Ne(t),count:a,price:c[e]||0}})),P(i);const m={};i.forEach(e=>{m[e.value.toLowerCase()]={label:e.label,price:e.price||0}}),L(m),C(e=>e.room_type&&i.some(t=>t.value.toLowerCase()===String(e.room_type||"").toLowerCase())?e:{...e,room_type:i[0]?.value||""})}return(0,e.useEffect)(()=>{function e(e){const t=e.target;if(null!==G){const e=document.querySelector(`[data-booking-menu="booking-${G}"]`);e&&e.contains(t)||K(null)}}return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[G]),(0,e.useEffect)(()=>{let e=!1;return(async()=>{try{await Promise.all([ge(),xe({})])}finally{e||r(!1)}})(),()=>{e=!0}},[]),(0,e.useEffect)(()=>{if(!w)return;!function(){const e=[];for(let t=0;t<24;t++)for(let a=0;a<60;a+=30){const n=new Date(0,0,0,t,a,0),r=new Date(0,0,0,t,a+30,0),l=e=>{let t=e.getHours();const a=t<12;return`${(t+11)%12+1}:${String(e.getMinutes()).padStart(2,"0")} ${a?"am":"pm"}`};e.push(`${l(n)} - ${l(r)}`)}z(e)}();let e=!1;return(async()=>{try{W(!0);const t=await fetch("https://restcountries.com/v3.1/all"),a=await t.json();if(e)return;const n=[],r=[],l=new Set;a.forEach(e=>{const t=e?.name?.common||"";t&&n.push(t);const a=e?.idd?.root||"",s=Array.isArray(e?.idd?.suffixes)?e.idd.suffixes:[];a&&s.length&&s.forEach(e=>{const n=`${a}${e}`;l.has(n)||(l.add(n),r.push({country:t,code:n}))})}),n.sort((e,t)=>e.localeCompare(t)),r.sort((e,t)=>e.country.localeCompare(t.country)),O(n),B(r)}catch(e){O(["Philippines","United States","Canada","United Kingdom"]),B([{country:"Philippines",code:"+63"},{country:"United States",code:"+1"}])}finally{W(!1)}})(),()=>{e=!0}},[w]),(0,e.useEffect)(()=>{w&&k.hotel_id&&we(k.hotel_id)},[w,k.hotel_id]),(0,e.useEffect)(()=>{const e=fe(k.checkin,k.checkout);ce(t=>{const a={};return(D||[]).forEach(n=>{const r=n.id,l=Math.max(0,Number(n.qty)||0),s=Array.isArray(t[r])?t[r]:[],o=[];for(let t=0;t<l;t++){const a="number"==typeof s[t]&&s[t]>0?s[t]:e,n=e>0?Math.max(1,Math.min(a||e,e)):0;o[t]=n}a[r]=o}),a}),me(e=>{const t={};return(D||[]).forEach(a=>{const n=a.id,r=Math.max(0,Number(a.qty)||0),l=Array.isArray(e[n])?e[n]:[],s=[];for(let e=0;e<r;e++){const t=l[e]||{},a=Math.max(1,Number(t.adult||1)),n=Math.max(0,Number(t.child||0));s[e]={adult:a,child:n}}t[n]=s}),t})},[D,k.checkin,k.checkout]),o.find(e=>String(e.id)===String(k.hotel_id)),(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4"},(0,e.createElement)("div",{className:"flex items-center justify-between mb-4"},(0,e.createElement)("h2",{className:"text-xl font-semibold"},"Bookings"),(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("button",{type:"button",onClick:()=>window.location.reload(),className:"border border-gray-300 px-3 py-2 rounded-[5px] h-10 bg-white hover:bg-gray-50",title:"Refresh"},"Refresh"),(0,e.createElement)("button",{type:"button",onClick:()=>S(!0),className:"bg-[#ffd126] text-[#00488a] hover:brightness-95 px-4 py-2 rounded-[5px] h-10",title:"Add Booking"},"Add Booking"))),(0,e.createElement)("div",{className:"bg-[#00488a] text-[#fefefd] p-4 rounded-[5px] shadow mb-4"},(0,e.createElement)("div",{className:"flex flex-wrap items-center gap-3 relative"},(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("input",{type:"text",value:l,onChange:e=>s(e.target.value),placeholder:"Search guest name",className:"h-10 w-full sm:w-56 md:w-72 bg-white text-gray-700 border border-gray-300 rounded-[5px] px-3 focus:outline-none focus:ring-2 focus:ring-[#ffd126]"})),(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("select",{value:i,onChange:e=>m(e.target.value),className:"h-10 w-full sm:w-44 bg-white text-gray-700 border border-gray-300 rounded-[5px] px-3 focus:outline-none focus:ring-2 focus:ring-[#ffd126]","aria-label":"All Hotels"},(0,e.createElement)("option",{value:""},"All Hotels"),o.map(t=>(0,e.createElement)("option",{key:t.id,value:t.id},t.name)))),(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("select",{value:p,onChange:e=>h(e.target.value),className:"h-10 w-full sm:w-44 bg-white text-gray-700 border border-gray-300 rounded-[5px] px-3 focus:outline-none focus:ring-2 focus:ring-[#ffd126]","aria-label":"All Statuses"},(0,e.createElement)("option",{value:""},"All Statuses"),(0,e.createElement)("option",{value:"created"},"Booked"),(0,e.createElement)("option",{value:"checked_in"},"Checked-In"),(0,e.createElement)("option",{value:"checked_out"},"Checked-Out"),(0,e.createElement)("option",{value:"canceled"},"Cancelled"))),(0,e.createElement)("div",{className:"relative"},(0,e.createElement)("button",{type:"button",onClick:()=>X(e=>!e),className:"h-10 w-full sm:w-auto bg-white text-[#00488a] border border-gray-300 rounded-[5px] px-3 hover:bg-[#ffd126]/10 hover:text-[#00488a] focus:text-[#00488a] focus:outline-none focus:ring-2 focus:ring-[#ffd126]",title:"Filters"},"Filters ▾"),J&&(0,e.createElement)("div",{className:"absolute z-20 mt-2 w-80 bg-white text-gray-800 border border-gray-200 rounded-[5px] shadow p-3"},(0,e.createElement)("div",{className:"text-sm font-medium mb-2 text-[#00488a]"},"Date Range"),(0,e.createElement)("div",{className:"grid grid-cols-1 gap-3"},(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-xs text-gray-600 mb-1"},"Start Date"),(0,e.createElement)("input",{type:"date",value:g,onChange:e=>x(e.target.value),placeholder:"mm/dd/yyyy",className:"h-10 w-full bg-white text-gray-700 border border-gray-300 rounded-[5px] px-2 focus:outline-none focus:ring-2 focus:ring-[#ffd126]"})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-xs text-gray-600 mb-1"},"End Date"),(0,e.createElement)("input",{type:"date",value:y,onChange:e=>b(e.target.value),placeholder:"mm/dd/yyyy",className:"h-10 w-full bg-white text-gray-700 border border-gray-300 rounded-[5px] px-2 focus:outline-none focus:ring-2 focus:ring-[#ffd126]"}))),(0,e.createElement)("div",{className:"flex items-center gap-2 mt-3"},(0,e.createElement)("button",{type:"button",onClick:function(){const e=be(new Date);x(e),b(e)},className:"h-10 bg-white text-[#00488a] font-medium px-3 rounded-[5px] hover:bg-[#ffd126]/20 border border-gray-300"},"Today"),(0,e.createElement)("button",{type:"button",onClick:function(){const e=new Date,t=e.getDay()||7,a=new Date(e);a.setDate(e.getDate()-(t-1));const n=new Date(a);n.setDate(a.getDate()+6),x(be(a)),b(be(n))},className:"h-10 bg-white text-[#00488a] font-medium px-3 rounded-[5px] hover:bg-[#ffd126]/20 border border-gray-300"},"This Week"),(0,e.createElement)("button",{type:"button",onClick:ye,className:"h-10 bg-[#22c55e] text-white font-semibold px-4 rounded-[5px] hover:brightness-95 focus:outline-none focus:ring-2 focus:ring-[#ffd126]"},"Apply")))),(0,e.createElement)("div",{className:"flex items-center gap-2 ml-auto w-full sm:w-auto"},(0,e.createElement)("button",{type:"button",onClick:ye,className:"h-10 w-full sm:w-auto bg-[#22c55e] text-white font-semibold px-4 rounded-[5px] hover:brightness-95 focus:outline-none focus:ring-2 focus:ring-[#ffd126]",title:"Apply"},"Apply"),(0,e.createElement)("button",{type:"button",onClick:function(){s(""),m(""),h(""),x(""),b(""),N([]),X(!1),V(!1)},className:"h-10 w-full sm:w-auto border border-white text-white px-4 rounded-[5px] hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-[#ffd126]",title:"Reset"},"Reset")))),E.length>=2?(0,e.createElement)("div",{className:"flex items-center justify-between bg-white rounded-[5px] border border-gray-200 p-3 mb-3"},(0,e.createElement)("div",{className:"text-sm text-slate-700"},E.length," selected"),(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("button",{type:"button",onClick:()=>Ee("checked_in"),className:"px-3 py-2 rounded-[5px] border border-gray-300 bg-white hover:bg-gray-50"},"Bulk Check-in"),(0,e.createElement)("button",{type:"button",onClick:()=>Ee("checked_out"),className:"px-3 py-2 rounded-[5px] border border-gray-300 bg-white hover:bg-gray-50"},"Bulk Check-out"),(0,e.createElement)("button",{type:"button",onClick:function(){const e=new URLSearchParams({action:"nhsa_admin_export_bookings",nonce:NHSA.nonce,guest:l,hotel_id:i,status:p,from:g,to:y}),t=`${NHSA.ajax}?${e.toString()}`;window.open(t,"_blank")},className:"px-3 py-2 rounded-[5px] border border-gray-300 bg-white hover:bg-gray-50"},"Export CSV"))):1===E.length?(0,e.createElement)("div",{className:"mb-3 text-sm text-slate-600"},"Select more guest names to view bulk action."):null,n?(0,e.createElement)("div",{className:"text-sm text-slate-500"},"Loading..."):(0,e.createElement)("div",{className:"w-full max-h-[70vh] overflow-x-auto overflow-y-auto"},(0,e.createElement)("table",{className:"min-w-[1200px] text-sm"},(0,e.createElement)("thead",{className:"text-left text-slate-500"},(0,e.createElement)("tr",null,(0,e.createElement)("th",{className:"py-2 pr-4"},(0,e.createElement)("input",{type:"checkbox",checked:E.length===t.length&&t.length>0,onChange:function(){E.length===t.length?N([]):N(t.map(e=>e.id))}})),(0,e.createElement)("th",{className:"py-2 pr-4"},"Guest"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Hotel Branch"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Room Type"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Room #"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Check-in"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Check-out"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Status"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Payment"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Actions"))),(0,e.createElement)("tbody",{className:"divide-y"},t.map((t,a)=>(0,e.createElement)("tr",{key:t.id,className:(a%2==0?"bg-white":"bg-slate-50")+" hover:bg-slate-100"},(0,e.createElement)("td",{className:"py-2 pr-4"},(0,e.createElement)("input",{type:"checkbox",checked:E.includes(t.id),onChange:()=>{return e=t.id,void N(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e}})),(0,e.createElement)("td",{className:"py-2 pr-4"},(0,e.createElement)("button",{type:"button",className:"font-semibold text-slate-900 text-base hover:underline",onClick:()=>{ae(t);const e=e=>{if(Array.isArray(e)){var t;const a=e.find(e=>"string"==typeof e&&e.trim().length>0);return String(null!==(t=null!=a?a:e[0])&&void 0!==t?t:"")}if(null==e)return"";const a=String(e);return/^\d+$/.test(a)?"":a};ee({salutation:e(t.details?.salutation),firstName:e(t.details?.firstName),lastName:e(t.details?.lastName),gender:e(t.details?.gender),birth:e(t.details?.birth),nationality:e(t.details?.nationality),email:e(t.details?.email||t?.user?.email),phone:e(t.details?.phone),arrivalWindow:e(t.details?.arrivalWindow),notes:e(t.details?.notes),rooms:Array.isArray(t.rooms)?t.rooms:[],roomCheckins:t.roomCheckins||{},checkout:t.computed?.checkout||t.checkout||"",payment:String(t.payment||"unpaid"),amounts:t.amounts||{subtotal:0,tax:0,total:0}}),Z(!0)}},t.guest),(t?.user?.email||t?.code)&&(0,e.createElement)("div",{className:"text-xs text-slate-600"},t?.user?.email?(0,e.createElement)("span",null,t.user.email):null,t?.user?.email&&t?.code?(0,e.createElement)("span",{className:"mx-1"},"·"):null,t?.code?(0,e.createElement)("span",null,"Code: ",t.code):null)),(0,e.createElement)("td",{className:"py-2 pr-4"},t.hotel),(0,e.createElement)("td",{className:"py-2 pr-4"},t.rooms&&t.rooms.length>0?t.rooms.map(e=>e.room_type||t.roomType).join(", "):t.roomType),(0,e.createElement)("td",{className:"py-2 pr-4"},t.rooms&&t.rooms.length>0?t.rooms.map(e=>e.room_number).join(", "):t.roomNum),(0,e.createElement)("td",{className:"py-2 pr-4"},t.checkin),(0,e.createElement)("td",{className:"py-2 pr-4"},t.checkout),(0,e.createElement)("td",{className:"py-2 pr-4"},(()=>{const a=(e=>{const t=String(e||"").toLowerCase();return"checked_in"===t?{label:"Checked-In",color:"bg-emerald-100 text-emerald-700"}:"canceled"===t?{label:"Cancelled",color:"bg-red-100 text-red-700"}:"checked_out"===t?{label:"Checked-Out",color:"bg-slate-200 text-slate-700"}:"created"===t?{label:"Booked",color:"bg-blue-100 text-blue-700"}:{label:String(e||"").replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),color:"bg-slate-100 text-slate-700"}})(t.status);return(0,e.createElement)("span",{className:`px-2 py-1 rounded-full ${a.color}`},a.label)})()),(0,e.createElement)("td",{className:"py-2 pr-4"},(()=>{const a=String(t.payment||"unpaid").toLowerCase(),n="paid"===a||"success"===a;return(0,e.createElement)("span",{className:"px-2 py-1 rounded-full "+(n?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700")},n?"Paid":"Unpaid")})()),(0,e.createElement)("td",{className:"py-2 pr-4"},(0,e.createElement)("div",{className:"relative","data-booking-menu":`booking-${t.id}`},(0,e.createElement)("button",{type:"button",className:"px-2 py-1 rounded-[5px] border border-gray-300 bg-white hover:bg-gray-50",onClick:()=>K(G===t.id?null:t.id),title:"More"},"⋯"),(0,e.createElement)("div",{className:"absolute right-0 z-20 mt-2 w-40 bg-white text-gray-800 border border-gray-200 rounded-[5px] shadow overflow-hidden "+(G===t.id?"block":"hidden")},(0,e.createElement)("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50",onClick:()=>{const e=Array.isArray(t.rooms)&&t.rooms.length>0?t.rooms.length:t.roomNum&&String(t.roomNum).includes(",")?String(t.roomNum).split(",").length:1;e>1&&!window.confirm(`This booking has ${e} rooms. Confirm checking in all rooms?`)||ve(t.id,"checked_in"),K(null)},title:"Check-in"},"Check-in"),(0,e.createElement)("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50",onClick:()=>{ve(t.id,"checked_out"),K(null)},title:"Check-out"},"Check-out"),(0,e.createElement)("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50 text-red-600",onClick:()=>{var e;e=t.id,v({open:!0,bookingId:e}),K(null)},title:"Cancel"},"Cancel")))))),0===t.length&&(0,e.createElement)("tr",null,(0,e.createElement)("td",{className:"py-3 text-slate-500",colSpan:"9"},"No bookings found."))))),f.open&&(0,e.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4 w-full max-w-sm"},(0,e.createElement)("div",{className:"text-lg font-semibold mb-2"},"Cancel booking?"),(0,e.createElement)("div",{className:"text-sm text-slate-600 mb-4"},"This action cannot be undone."),(0,e.createElement)("div",{className:"flex justify-end gap-2"},(0,e.createElement)("button",{className:"px-3 py-2 rounded-[5px] border border-gray-300",onClick:()=>v({open:!1,bookingId:null})},"Close"),(0,e.createElement)("button",{className:"px-3 py-2 bg-red-600 text-white rounded-[5px]",onClick:async function(){f.bookingId&&(await ve(f.bookingId,"canceled"),v({open:!1,bookingId:null}))}},"Cancel booking")))),w&&(0,e.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4 w-[95%] sm:w-[90%] md:w-[70%] lg:w-[70%] xl:w-[70%] max-w-[1400px] max-h-[85vh] overflow-y-auto overflow-x-auto"},(0,e.createElement)("div",{className:"flex items-center justify-between mb-2"},(0,e.createElement)("h3",{className:"text-lg font-semibold"},le?"Update Payment":"Add Booking"),(0,e.createElement)("button",{className:"text-slate-500",onClick:()=>S(!1)},"✕")),(0,e.createElement)("form",{onSubmit:async function(e){e?.preventDefault?.();const t=`${k.firstName||""} ${k.lastName||""}`.trim()||"Guest",a={...k,guest:t},n={},r={};(D||[]).forEach(e=>{const t=Array.isArray(oe[e.id])?oe[e.id]:[];n[e.id]=t}),(D||[]).forEach(e=>{const t=Array.isArray(ie[e.id])?ie[e.id]:[];r[e.id]=t});const l=new URLSearchParams({action:"nhsa_admin_add_booking",nonce:NHSA.nonce,guest:a.guest,salutation:a.salutation,firstName:a.firstName,lastName:a.lastName,gender:a.gender,birth:a.birth,nationality:a.nationality,email:a.email,phone:k.phone||"",hotel_id:a.hotel_id,room_type:a.room_type,room_qty:String(a.room_qty||1),checkin:a.checkin,checkout:a.checkout,guests:String(a.guests||1),payment:a.payment||"",paymentMethod:a.paymentMethod||"",paymentRef:a.paymentRef||"",arrivalWindow:a.arrivalWindow||"",notes:a.notes,specifyPerRoom:a.specifyPerRoom,selected_types:JSON.stringify(D||[]),nights_map:JSON.stringify(n),occupants_map:JSON.stringify(r)}),s=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l}),o=await s.json();o?.success&&(S(!1),C({guest:"",salutation:"",firstName:"",lastName:"",gender:"",birth:"",nationality:"",email:"",phone:"",arrivalWindow:"",hotel_id:"",room_type:"",room_qty:1,checkin:"",checkout:"",guests:1,notes:"",specifyPerRoom:!1}),_({}),P([]),ye())},className:"space-y-3"},(0,e.createElement)("div",{className:"flex gap-2 border-b border-gray-200 mb-2"},(0,e.createElement)("button",{type:"button",className:"px-3 py-2 "+(0===ne?"border-b-2 border-slate-900 text-slate-900":"text-slate-600 hover:text-slate-900"),onClick:()=>re(0)},"Details"),(0,e.createElement)("button",{type:"button",className:"px-3 py-2 "+(1===ne?"border-b-2 border-slate-900 text-slate-900":"text-slate-600 hover:text-slate-900"),onClick:()=>re(1)},"Guest Info"),(0,e.createElement)("button",{type:"button",className:"px-3 py-2 "+(2===ne?"border-b-2 border-slate-900 text-slate-900":"text-slate-600 hover:text-slate-900"),onClick:()=>re(2)},"Booking Summary")),0===ne&&(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Check-in"),(0,e.createElement)("input",{type:"date",min:be(new Date),className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.checkin,onChange:e=>{const t=e.target.value;let a=k.checkout;if(a&&t&&new Date(a)<=new Date(t)){const e=new Date(t);e.setDate(e.getDate()+1),a=be(e)}C({...k,checkin:t,checkout:a})},required:!0})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Check-out"),(0,e.createElement)("input",{type:"date",min:k.checkin?(()=>{const e=new Date(k.checkin);return e.setDate(e.getDate()+1),be(e)})():be(new Date),className:"w-full bg-white border border-gray-300 rounded-[5px] px-3 py-2 "+(k.checkout&&k.checkin&&new Date(k.checkout)<=new Date(k.checkin)?"line-through text-gray-500":"text-gray-800"),value:k.checkout,onChange:e=>{const t=e.target.value;if(k.checkin&&t&&new Date(t)<=new Date(k.checkin)){const e=new Date(k.checkin);e.setDate(e.getDate()+1),C({...k,checkout:be(e)})}else C({...k,checkout:t})},required:!0})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Hotel"),(0,e.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.hotel_id,onChange:async e=>{const t=e.target.value;C({...k,hotel_id:t,room_type:""}),await we(t)},required:!0},(0,e.createElement)("option",{value:""},"Select hotel"),o.map(t=>(0,e.createElement)("option",{key:t.id,value:t.id},t.name))),k.hotel_id&&(()=>{const t=H.map(e=>`${e.label}: ${A[e.value.toLowerCase()]||0}`);return(0,e.createElement)("div",{className:"mt-1 text-xs text-slate-600"},t.length?`Availability — ${t.join(", ")}`:"No room types found for this hotel.")})()),(0,e.createElement)("div",{className:"md:col-span-3"},(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Room Types"),(0,e.createElement)("div",{className:"space-y-3"},0===H.length&&(0,e.createElement)("div",{className:"text-sm text-slate-500"},"No room types available for this hotel."),H.map(t=>{const a=t.value.toLowerCase(),n=D.find(e=>e.id===a),r=n?.qty||0,l=A[a]||0,s=fe(k.checkin,k.checkout),o=oe[a]||[],c=T[a]?.price||t.price||0,i=Array.from({length:r}).reduce((e,t,a)=>{const n=o[a]||s;return e+c*Math.max(0,n)},0);return(0,e.createElement)("div",{key:t.value,className:"border border-gray-200 rounded-[5px] p-2"},(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("div",{className:"flex-1 text-sm text-slate-800"},t.label," ",(0,e.createElement)("span",{className:"text-slate-500"},"(",l," available)")),(0,e.createElement)("input",{type:"number",min:"0",max:l,className:"w-20 bg-white text-gray-800 border border-gray-300 rounded-[5px] px-2 py-1",value:r,onChange:e=>{const t=Math.max(0,Math.min(l,Number(e.target.value)||0));U(e=>{const n=e.filter(e=>e.id!==a);return t>0?[...n,{id:a,qty:t}]:n})}})),r>0&&(0,e.createElement)("div",{className:"mt-2 space-y-1"},(0,e.createElement)("div",{className:"text-xs text-slate-600"},"Nights between dates: ",(0,e.createElement)("span",{className:"font-medium text-slate-800"},s)),(0,e.createElement)("div",{className:"text-xs text-slate-600"},"Price per night: ",(0,e.createElement)("span",{className:"font-medium text-slate-800"},"₱",Number(c).toLocaleString())),(0,e.createElement)("div",{className:"text-xs text-slate-600"},"Total for this room type: ",(0,e.createElement)("span",{className:"font-semibold text-slate-900"},"₱",Number(i).toLocaleString())),(0,e.createElement)("div",{className:"mt-1 grid grid-cols-1 md:grid-cols-2 gap-2"},Array.from({length:r}).map((t,n)=>{var r;const l=null!==(r=o[n])&&void 0!==r?r:s;return(0,e.createElement)("div",{key:n,className:"grid grid-cols-1 md:grid-cols-3 items-center gap-2 p-2 border rounded-[5px]"},(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("label",{className:"text-xs text-slate-600"},"Room ",n+1," nights"),(0,e.createElement)("input",{type:"number",min:"0",max:s,className:"w-24 bg-white text-gray-800 border border-gray-300 rounded-[5px] px-2 py-1",value:l,onChange:e=>{const t=Math.max(0,Math.min(s,Number(e.target.value)||0));ce(e=>{const r={...e},l=Array.isArray(r[a])?[...r[a]]:[];return l[n]=t,r[a]=l,r})}})),(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("label",{className:"text-xs text-slate-600"},"Adult"),(0,e.createElement)("input",{type:"number",min:"1",className:"w-20 bg-white text-gray-800 border border-gray-300 rounded-[5px] px-2 py-1",value:ie[a]?.[n]?.adult||1,onChange:e=>{const t=Math.max(1,Number(e.target.value)||1);me(e=>{const r={...e},l=Array.isArray(r[a])?r[a].map(e=>({...e})):[];for(;l.length<=n;)l.push({adult:1,child:0});return l[n].adult=t,r[a]=l,r})}}),(0,e.createElement)("label",{className:"text-xs text-slate-600"},"Child"),(0,e.createElement)("input",{type:"number",min:"0",className:"w-20 bg-white text-gray-800 border border-gray-300 rounded-[5px] px-2 py-1",value:ie[a]?.[n]?.child||0,onChange:e=>{const t=Math.max(0,Number(e.target.value)||0);me(e=>{const r={...e},l=Array.isArray(r[a])?r[a].map(e=>({...e})):[];for(;l.length<=n;)l.push({adult:1,child:0});return l[n].child=t,r[a]=l,r})}})),(0,e.createElement)("div",{className:"text-xs text-slate-700 text-right w-full"},"₱",Number(c*(l||0)).toLocaleString()))}))))})))),1===ne&&(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Salutation"),(0,e.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.salutation,onChange:e=>C({...k,salutation:e.target.value}),required:!0},(0,e.createElement)("option",{value:""},"Select"),(0,e.createElement)("option",null,"Mr."),(0,e.createElement)("option",null,"Mrs."),(0,e.createElement)("option",null,"Ms."),(0,e.createElement)("option",null,"Dr."))),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"First Name"),(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.firstName,onChange:e=>C({...k,firstName:e.target.value}),required:!0})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Last Name"),(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.lastName,onChange:e=>C({...k,lastName:e.target.value}),required:!0})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Gender"),(0,e.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.gender,onChange:e=>C({...k,gender:e.target.value}),required:!0},(0,e.createElement)("option",{value:""},"Select"),(0,e.createElement)("option",null,"Male"),(0,e.createElement)("option",null,"Female"))),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Birth Date"),(0,e.createElement)("input",{type:"date",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.birth,onChange:e=>C({...k,birth:e.target.value}),required:!0})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Nationality"),(0,e.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.nationality,onChange:e=>C({...k,nationality:e.target.value}),required:!0},(0,e.createElement)("option",{value:""},I?"Loading…":"Select nationality"),M.map(t=>(0,e.createElement)("option",{key:t,value:t},t)))),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Email"),(0,e.createElement)("input",{type:"email",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.email,onChange:e=>C({...k,email:e.target.value}),required:!0})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Contact Number"),(0,e.createElement)("input",{type:"tel",inputMode:"numeric",pattern:"[0-9]{12,13}",maxLength:13,minLength:12,className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.phone,onChange:e=>{const t=(e.target.value||"").replace(/\D+/g,"").slice(0,13);C({...k,phone:t})},required:!0})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Estimated Arrival Time"),(0,e.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.arrivalWindow,onChange:e=>C({...k,arrivalWindow:e.target.value}),required:!0},(0,e.createElement)("option",{value:""},"Select"),q.map(t=>(0,e.createElement)("option",{key:t,value:t},t)))),(0,e.createElement)("div",{className:"md:col-span-3"},(0,e.createElement)("div",{className:"text-sm font-medium text-slate-700"},"Special Notes ",(0,e.createElement)("span",{className:"text-xs text-slate-500"},"(Subject to availability)")),(0,e.createElement)("textarea",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 mt-1",rows:3,value:k.notes,onChange:e=>C({...k,notes:e.target.value}),placeholder:"Add any special requests here"}))),2===ne&&(0,e.createElement)("div",{className:"space-y-3"},(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"text-sm text-slate-600"},"Hotel"),(0,e.createElement)("div",{className:"text-slate-900"},o.find(e=>String(e.id)===String(k.hotel_id))?.name||"-")),(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"text-sm text-slate-600"},"Dates"),(0,e.createElement)("div",{className:"text-slate-900"},k.checkin||"-"," → ",k.checkout||"-"))),(0,e.createElement)("div",{className:"border border-gray-200 rounded-[5px] p-2 space-y-2 bg-slate-50"},(()=>{const t=D.length>0?D:k.room_type?[{id:String(k.room_type).toLowerCase(),qty:k.room_qty||1}]:[];if(0===t.length)return(0,e.createElement)("div",{className:"text-sm text-slate-500"},"No rooms selected.");const a=fe(k.checkin,k.checkout);return t.map(t=>{const n=T[t.id]||{label:Ne(t.id),price:0},r=n.price||0,l=(R[t.id]||[]).slice(0,t.qty),s=oe[t.id]||[],o=Array.from({length:t.qty||0}).reduce((e,t,n)=>{var l;const o=(null!==(l=s[n])&&void 0!==l?l:a)||0;return e+r*o},0);return(0,e.createElement)("div",{key:t.id,className:"border-b last:border-0 pb-2"},Array.from({length:t.qty||0}).map((o,c)=>{var i;const m=l[c],d=(null!==(i=s[c])&&void 0!==i?i:a)||0,u=m&&(m.price||0)||r||0,p=u*d;return(0,e.createElement)("div",{key:m?m.id:`${t.id}-${c}`,className:"flex justify-between text-sm"},(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"text-slate-800"},m?`Room ${m.number}`:"Room — TBA"),(0,e.createElement)("div",{className:"text-slate-600"},n.label," — ",d," night",1===d?"":"s")),(0,e.createElement)("div",{className:"text-right"},(0,e.createElement)("div",{className:"text-xs text-slate-600"},"Price per night: ₱",Number(u).toLocaleString()),(0,e.createElement)("div",{className:"text-slate-900"},"₱",Number(p).toLocaleString())))}),(0,e.createElement)("div",{className:"flex justify-between text-xs text-slate-700 pt-1"},(0,e.createElement)("div",null,"Type subtotal"),(0,e.createElement)("div",null,"₱",Number(o).toLocaleString())))})})(),(()=>{const t=D.length>0?D:k.room_type?[{id:String(k.room_type).toLowerCase(),qty:k.room_qty||1}]:[],a=fe(k.checkin,k.checkout),n=t.reduce((e,t)=>{const n=T[t.id]?.price||0,r=oe[t.id]||[];return e+Array.from({length:t.qty||0}).reduce((e,t,l)=>{var s;const o=(null!==(s=r[l])&&void 0!==s?s:a)||0;return e+n*o},0)},0),r=.12*n,l=n+r;return(0,e.createElement)("div",{className:"space-y-1 pt-1 border-t"},(0,e.createElement)("div",{className:"flex justify-between text-sm"},(0,e.createElement)("div",{className:"text-slate-700"},"Subtotal"),(0,e.createElement)("div",{className:"text-right text-slate-900"},"₱",n.toLocaleString())),(0,e.createElement)("div",{className:"flex justify-between text-sm"},(0,e.createElement)("div",{className:"text-slate-700"},"Taxes/Fees"),(0,e.createElement)("div",{className:"text-right text-slate-900"},"₱",r.toLocaleString())),(0,e.createElement)("div",{className:"flex justify-between text-sm font-semibold"},(0,e.createElement)("div",{className:"text-slate-800"},"Total"),(0,e.createElement)("div",{className:"text-right text-slate-900"},"₱",l.toLocaleString())))})()),(0,e.createElement)("div",{className:"space-y-2"},(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Payment Method"),(0,e.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.paymentMethod||"",onChange:e=>C({...k,paymentMethod:e.target.value,payment:"cash"===e.target.value?k.payment:"",paymentRef:"cash"===e.target.value?"":k.paymentRef}),required:!0},(0,e.createElement)("option",{value:""},"Select"),(0,e.createElement)("option",{value:"cash"},"Cash"),(0,e.createElement)("option",{value:"card"},"Debit/Credit"),(0,e.createElement)("option",{value:"ewallet"},"eWallet"))),"cash"===k.paymentMethod&&(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Cash Status"),(0,e.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",value:k.payment||"",onChange:e=>C({...k,payment:e.target.value}),required:!0},(0,e.createElement)("option",{value:""},"Select"),(0,e.createElement)("option",{value:"paid"},"Paid"),(0,e.createElement)("option",{value:"unpaid"},"Unpaid"))),("card"===k.paymentMethod||"ewallet"===k.paymentMethod)&&(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Reference Number"),(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2",placeholder:"Enter reference number",value:k.paymentRef||"",onChange:e=>C({...k,paymentRef:e.target.value}),required:!0})))),(0,e.createElement)("div",{className:"flex justify-between gap-2 pt-2"},(0,e.createElement)("div",null,ne>0&&(0,e.createElement)("button",{type:"button",className:"px-3 py-2 rounded-[5px] border border-gray-300",onClick:()=>re(ne-1)},"Back")),(0,e.createElement)("div",{className:"ml-auto flex gap-2"},(0,e.createElement)("button",{type:"button",className:"px-3 py-2 rounded-[5px] border border-gray-300",onClick:()=>S(!1)},"Cancel"),ne<2?(0,e.createElement)("button",{type:"button",className:"px-3 py-2 bg-slate-900 text-white rounded-[5px]",disabled:!((0!==ne||k.checkin&&k.checkout&&k.hotel_id&&(0!==(D||[]).length||k.room_type))&&(1!==ne||k.salutation&&k.firstName&&k.lastName&&k.gender&&k.birth&&k.nationality&&k.email&&(k.phone||"").match(/^\d{12,13}$/)&&k.arrivalWindow)),onClick:()=>re(ne+1)},"Next"):(0,e.createElement)("button",{type:"submit",className:"px-3 py-2 bg-slate-900 text-white rounded-[5px]",disabled:!(k.checkin&&k.checkout&&k.hotel_id&&(0!==(D||[]).length||k.room_type)&&k.salutation&&k.firstName&&k.lastName&&k.gender&&k.birth&&k.nationality&&k.email&&(k.phone||"").match(/^\d{12,13}$/)&&k.arrivalWindow&&k.paymentMethod&&("cash"===k.paymentMethod?k.payment:k.paymentRef))},"Create Booking")))))),Y&&Q&&(0,e.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4 w-full max-w-xl max-h-[85vh] overflow-y-auto overflow-x-auto"},(0,e.createElement)("div",{className:"flex items-center justify-between mb-2"},(0,e.createElement)("h3",{className:"text-lg font-semibold"},"Guest Details"),(0,e.createElement)("button",{className:"text-slate-500",onClick:()=>Z(!1)},"✕")),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"text-xs text-slate-500"},"Salutation"),(0,e.createElement)("div",{className:"text-sm text-slate-800 font-semibold"},Q.salutation||"-")),(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"text-xs text-slate-500"},"First Name"),(0,e.createElement)("div",{className:"text-sm text-slate-800 font-semibold"},Q.firstName||"-")),(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"text-xs text-slate-500"},"Last Name"),(0,e.createElement)("div",{className:"text-sm text-slate-800 font-semibold"},Q.lastName||"-")),(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"text-xs text-slate-500"},"Gender"),(0,e.createElement)("div",{className:"text-sm text-slate-800 font-semibold"},Q.gender||"-")),(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"text-xs text-slate-500"},"Birth Date"),(0,e.createElement)("div",{className:"text-sm text-slate-800 font-semibold"},Q.birth||"-")),(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"text-xs text-slate-500"},"Nationality"),(0,e.createElement)("div",{className:"text-sm text-slate-800 font-semibold"},Q.nationality||"-")),(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"text-xs text-slate-500"},"Email"),(0,e.createElement)("div",{className:"text-sm text-slate-800 font-semibold break-all"},Q.email||"-")),(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"text-xs text-slate-500"},"Contact Number"),(0,e.createElement)("div",{className:"text-sm text-slate-800 font-semibold"},Q.phone||"-")),(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"text-xs text-slate-500"},"Arrival Window"),(0,e.createElement)("div",{className:"text-sm text-slate-800 font-semibold"},Q.arrivalWindow||"-")),(0,e.createElement)("div",{className:"md:col-span-3"},(0,e.createElement)("div",{className:"text-xs text-slate-500"},"Payment Status"),(0,e.createElement)("div",{className:"flex flex-wrap items-center gap-2"},(0,e.createElement)("span",{className:"px-2 py-1 rounded-full text-xs "+("paid"===String(Q.payment||"unpaid").toLowerCase()?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700")},(0,e.createElement)("span",{className:"font-semibold"},"paid"===String(Q.payment||"unpaid").toLowerCase()?"Paid":"Unpaid")),"paid"===String(Q.payment||"unpaid").toLowerCase()&&(0,e.createElement)("span",{className:"text-sm text-slate-900 font-semibold ml-2"},"₱",Number(te?.amounts?.total||0).toLocaleString()),"paid"!==String(Q.payment||"unpaid").toLowerCase()&&(0,e.createElement)("button",{className:"px-2 py-1 border border-gray-300 rounded-[5px] text-xs",onClick:()=>{Z(!1),se(te?.id||null),C({guest:te?.guest||"",salutation:Q.salutation||"",firstName:Q.firstName||"",lastName:Q.lastName||"",gender:Q.gender||"",birth:Q.birth||"",nationality:Q.nationality||"",email:Q.email||"",phone:Q.phone||"",arrivalWindow:Q.arrivalWindow||"",payment:"",paymentMethod:"",paymentRef:"",hotel_id:String(te?.hotelId||""),room_type:te?.roomType||"",room_qty:1,checkin:te?.checkin||"",checkout:te?.checkout||"",guests:Number(te?.details?.guests||te?.guests||1),notes:Q.notes||"",specifyPerRoom:!1}),S(!0),re(2)}},"Update Payment"))),(0,e.createElement)("div",{className:"md:col-span-3"},(0,e.createElement)("div",{className:"text-xs text-slate-500"},"Rooms"),Array.isArray(Q.rooms)&&Q.rooms.length>0?(0,e.createElement)("ul",{className:"text-sm text-slate-800 list-disc list-inside space-y-0.5"},Q.rooms.map((t,a)=>{const n=(Q.roomCheckins||{})[String(t.room_id||"")]||null,r=Q.checkout||null;let l=!1,s="";if(n)try{const e=new Date(n);let t=e.getHours();s=`${(t+11)%12+1}:${String(e.getMinutes()).padStart(2,"0")} ${t<12?"AM":"PM"}`}catch(e){s=n}if(n&&r)try{const e=new Date(n),t=new Date(r+"T12:00:00");l=(e.getTime()-t.getTime())/6e4>30}catch(e){l=!1}const o="paid"===String(Q.payment||"unpaid").toLowerCase();return(0,e.createElement)("li",{key:`${t.room_id||a}`,className:l?"text-red-600":""},(0,e.createElement)("div",{className:"flex items-center justify-between gap-2"},(0,e.createElement)("div",null,(0,e.createElement)("span",null,"Room ",t.room_number," — ",String(t.room_type||"").toUpperCase()),n?(0,e.createElement)("span",{className:"text-xs text-slate-600"}," (checked in: ",s,")"):null),o&&(0,e.createElement)("div",null,n?(0,e.createElement)("button",{className:"px-2 py-1 text-xs border border-gray-300 rounded-[5px]",onClick:()=>{Z(!1),ve(te?.id,"checked_out")}},"Check-Out"):(0,e.createElement)("button",{className:"px-2 py-1 text-xs border border-gray-300 rounded-[5px]",onClick:()=>{Z(!1),ve(te?.id,"checked_in")}},"Check-In"))))})):(0,e.createElement)("div",{className:"text-sm text-slate-800"},"-")),(0,e.createElement)("div",{className:"md:col-span-3"},(0,e.createElement)("div",{className:"text-xs text-slate-500"},"Special Notes (Subject to availability)"),(0,e.createElement)("div",{className:"text-sm text-slate-800 whitespace-pre-line"},Q.notes||"-"))),(0,e.createElement)("div",{className:"mt-3 flex justify-end"},(0,e.createElement)("button",{className:"px-3 py-2 rounded-[5px] border border-gray-300",onClick:()=>Z(!1)},"Close")))))},Le=()=>(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5"},(0,e.createElement)("path",{d:"M12 3.75a.75.75 0 0 1 .75.75v6.75H19.5a.75.75 0 0 1 0 1.5h-6.75V19.5a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75z"})),De=({value:t,onChange:a})=>{const[n,r]=(0,e.useState)(Array.isArray(t)?t.join(", "):"");return(0,e.useEffect)(()=>{r(Array.isArray(t)?t.join(", "):"")},[t]),(0,e.createElement)("div",{className:"space-y-1"},(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",placeholder:"e.g., WiFi, TV, Air Conditioning",value:n,onChange:e=>r(e.target.value)}),(0,e.createElement)("div",{className:"flex justify-end"},(0,e.createElement)("button",{type:"button",className:"text-sm px-2 py-1 border border-gray-300 rounded-[5px]",onClick:()=>{const e=n.split(",").map(e=>e.trim()).filter(Boolean);a(e)}},"Apply")))},Ue=({value:t,onChange:a})=>{const[n,r]=(0,e.useState)(Array.isArray(t)?t:[]),[l,s]=(0,e.useState)("");return(0,e.useEffect)(()=>{r(Array.isArray(t)?t:[])},[t]),(0,e.createElement)("div",{className:"space-y-2"},(0,e.createElement)("div",{className:"flex gap-2"},(0,e.createElement)("input",{className:"flex-1 bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",placeholder:"https://...",value:l,onChange:e=>s(e.target.value)}),(0,e.createElement)("button",{type:"button",className:"px-3 py-2 border border-gray-300 rounded-[5px]",onClick:function(){const e=l.trim();if(!e)return;const t=[...n,e];r(t),a(t)}},"Add URL"),(0,e.createElement)("button",{type:"button",className:"px-3 py-2 border border-gray-300 rounded-[5px]",onClick:function(){try{const e=window?.wp;if(!e||!e.media)return void alert("Media library not available.");const t=e.media({title:"Select Images",library:{type:"image"},multiple:!0,button:{text:"Use selected"}});t.on("select",()=>{const e=t.state().get("selection"),l=[];if(e.each(e=>{const t=e.get("url");t&&l.push(t)}),l.length){const e=[...n,...l];r(e),a(e)}}),t.open()}catch(e){}}},"Upload")),(0,e.createElement)("ul",{className:"space-y-1"},n.map((t,l)=>(0,e.createElement)("li",{key:`${t}-${l}`,className:"flex items-center justify-between text-sm"},(0,e.createElement)("span",{className:"truncate max-w-[260px]",title:t},t),(0,e.createElement)("button",{type:"button",className:"text-red-600 px-2 py-1 hover:underline",onClick:()=>function(e){const t=n.filter((t,a)=>a!==e);r(t),a(t)}(l)},"Remove"))),0===n.length&&(0,e.createElement)("li",{className:"text-slate-500 text-sm"},"No images added.")))},Me=()=>(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4"},(0,e.createElement)("path",{d:"M3 4.5A1.5 1.5 0 0 1 4.5 3h9A1.5 1.5 0 0 1 15 4.5V12h5.25A1.75 1.75 0 0 1 22 13.75V21a.75.75 0 0 1-1.5 0v-2.25h-2V21a.75.75 0 0 1-1.5 0v-2.25H7V21a.75.75 0 0 1-1.5 0v-2.25h-2V21A.75.75 0 0 1 2 21v-9.75A1.75 1.75 0 0 1 3.75 9.5H15V4.5A.5.5 0 0 0 14.5 4h-9a.5.5 0 0 0-.5.5V12h-1V4.5zM6 6.75h3V9H6V6.75zm0 3.75h3v2.25H6V10.5zm4.5-3.75h3V9h-3V6.75zm0 3.75h3v2.25h-3V10.5z"})),Oe=()=>{const[a,n]=(0,e.useState)([]),[r,l]=(0,e.useState)(!0),[s,o]=(0,e.useState)(null),[c,i]=(0,e.useState)([]),[m,d]=(0,e.useState)(!1),[u,p]=(0,e.useState)({number:"",type:""}),[h,g]=(0,e.useState)({name:"",location:""}),[x,y]=(0,e.useState)([{name:"",location:""}]),[b,f]=(0,e.useState)(!1),[v,E]=(0,e.useState)(!1),[N,w]=(0,e.useState)({range:"",type:"standard"}),[S,k]=(0,e.useState)(null),[C,A]=(0,e.useState)({}),[_,H]=(0,e.useState)("number"),[P,R]=(0,e.useState)("asc"),[j,T]=(0,e.useState)(null),[L,D]=(0,e.useState)({price:"",description:""}),[U,M]=(0,e.useState)(null),[O,$]=(0,e.useState)(null),[B,I]=(0,e.useState)(!1),[W,q]=(0,e.useState)(!1),[z,F]=(0,e.useState)({name:"",price:"",description:"",amenities:[],images:[]}),[V,J]=(0,e.useState)([]),[X,G]=(0,e.useState)(""),[K,Y]=(0,e.useState)("rooms"),[Z,Q]=(0,e.useState)(!1),[ee,te]=(0,e.useState)({id:0,name:"",price:"",description:"",amenities:[],images:[]}),[ae,ne]=(0,e.useState)(!1),[re,le]=(0,e.useState)(null);async function se(){const e=new URLSearchParams({action:"nhsa_admin_list_hotels",nonce:NHSA.nonce}),t=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),a=await t.json();n(a?.data?.hotels||[]),l(!1)}async function oe(e){o(e);const t=new URLSearchParams({action:"nhsa_admin_list_rooms",nonce:NHSA.nonce,hotel_id:String(e.id),sort_by:_,sort_dir:P}),a=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),n=await a.json();i(n?.data?.rooms||[]);try{const e=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"nhsa_admin_list_room_types",nonce:NHSA.nonce})}),t=await e.json();J(t?.data?.room_types||[])}catch(e){}}function ce(){y([...x,{name:"",location:""}])}function ie(e,t,a){y(x.map((n,r)=>r===e?{...n,[t]:a}:n))}function me(){k(null),A({})}function de(){T(null),D({price:"",description:""})}async function ue(){if(!j)return;const e=new URLSearchParams({action:"nhsa_admin_update_room",nonce:NHSA.nonce,id:String(j),price:String(L.price||""),description:String(L.description||"")});await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),de(),s&&oe(s)}(0,e.useEffect)(()=>{se()},[]),(0,e.useEffect)(()=>{function e(e){const t=e.target;if(null!==U){const e=document.querySelector(`[data-hotel-menu="hotel-${U}"]`);e&&e.contains(t)||M(null)}if(null!==O){const e=document.querySelector(`[data-room-menu="room-${O}"]`);e&&e.contains(t)||$(null)}}return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[U,O]);const pe=a.filter(e=>{const t=X.trim().toLowerCase();return!t||String(e.name||"").toLowerCase().includes(t)||String(e.location||"").toLowerCase().includes(t)});return(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4"},(0,e.createElement)("div",{className:"flex items-center justify-between mb-4"},(0,e.createElement)("h2",{className:"text-xl font-semibold"},"Hotels & Rooms"),(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("button",{className:"px-3 py-2 bg-slate-900 text-white rounded-[5px] flex items-center gap-2",onClick:()=>f(!0)},(0,e.createElement)(Le,null),(0,e.createElement)("span",null,"Add Hotel")),s&&(0,e.createElement)("button",{className:"px-3 py-2 border border-gray-300 rounded-[5px] flex items-center gap-2",onClick:()=>E(!0)},(0,e.createElement)(Le,null),(0,e.createElement)("span",null,"Add Rooms (Bulk)")))),b&&(0,e.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4 w-full max-w-xl"},(0,e.createElement)("div",{className:"flex items-center justify-between mb-2"},(0,e.createElement)("h3",{className:"text-lg font-semibold"},"Add More Hotels"),(0,e.createElement)("button",{className:"text-slate-500",onClick:()=>f(!1)},"✕")),(0,e.createElement)("div",{className:"space-y-2"},x.map((t,a)=>(0,e.createElement)("div",{key:a,className:"grid grid-cols-1 md:grid-cols-3 gap-3"},(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",placeholder:"Hotel Name",value:t.name,onChange:e=>ie(a,"name",e.target.value)}),(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",placeholder:"Location",value:t.location,onChange:e=>ie(a,"location",e.target.value)}),a===x.length-1?(0,e.createElement)("button",{type:"button",title:"Add another row","aria-label":"Add another row",className:"px-3 py-2 bg-slate-900 text-white rounded-[5px]",onClick:ce},"+"):(0,e.createElement)("div",null))),(0,e.createElement)("div",{className:"flex justify-end gap-2 pt-2"},(0,e.createElement)("button",{className:"px-3 py-2 rounded-[5px] border border-gray-300",onClick:()=>f(!1)},"Cancel"),(0,e.createElement)("button",{className:"px-3 py-2 bg-slate-900 text-white rounded-[5px]",onClick:async function(){for(const e of x){if(!e.name)continue;const t=new URLSearchParams({action:"nhsa_admin_add_hotel",nonce:NHSA.nonce,name:e.name,location:e.location||""});await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t})}y([{name:"",location:""}]),f(!1),se()}},"Save"))))),r?(0,e.createElement)("div",{className:"text-sm text-slate-500"},"Loading..."):(0,e.createElement)("div",{className:"flex flex-col md:flex-row gap-6"},(0,e.createElement)("aside",{className:"md:w-72 w-full"},(0,e.createElement)("div",{className:"border border-gray-200 rounded-[5px] p-3"},(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",placeholder:"Search hotels",value:X,onChange:e=>G(e.target.value)}),(0,e.createElement)("div",{className:"flex items-center justify-between mt-3"},(0,e.createElement)("div",{className:"inline-flex items-center gap-2 text-sm text-slate-700"},(0,e.createElement)(Me,null),(0,e.createElement)("span",null,"Hotels")),(0,e.createElement)("span",{className:"text-xs px-2 py-1 bg-slate-100 rounded-[5px] text-slate-700"},pe.length)),(0,e.createElement)("ul",{className:"mt-2 divide-y"},pe.map(a=>(0,e.createElement)("li",{key:a.id,className:"relative group"},(0,e.createElement)("div",{className:"flex items-start justify-between gap-2"},(0,e.createElement)("button",{type:"button",className:"flex-1 text-left px-3 py-2 rounded-[5px] "+(s?.id===a.id?"bg-slate-900 text-white":"hover:bg-slate-100"),onClick:()=>{S!==a.id&&oe(a)}},S===a.id?(0,e.createElement)("div",{className:"space-y-2"},(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-2 py-1 focus:ring-2 focus:ring-[#ffd126]",value:C.name||"",onChange:e=>A({...C,name:e.target.value}),placeholder:"Hotel Name"}),(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-2 py-1 focus:ring-2 focus:ring-[#ffd126]",value:C.location||"",onChange:e=>A({...C,location:e.target.value}),placeholder:"Location"}),(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("button",{type:"button",className:"px-2 py-1 bg-slate-900 text-white rounded-[5px]",onClick:e=>{e.preventDefault(),e.stopPropagation(),async function(){S&&(await async function(e,t){const a=new URLSearchParams({action:"nhsa_admin_update_hotel",nonce:NHSA.nonce,id:String(e),name:t.name,location:t.location||""});await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a}),se()}(S,C),me())}()}},"Save"),(0,e.createElement)("button",{type:"button",className:"px-2 py-1 border border-gray-300 rounded-[5px]",onClick:e=>{e.preventDefault(),e.stopPropagation(),me()}},"Cancel"))):(0,e.createElement)(t.Fragment,null,(0,e.createElement)("div",{className:"font-medium"},a.name),a.location?(0,e.createElement)("div",{className:"text-xs text-slate-500"},a.location):null)),(0,e.createElement)("div",{className:"px-2 py-2"},(0,e.createElement)("div",{className:"relative","data-hotel-menu":`hotel-${a.id}`},(0,e.createElement)("button",{type:"button",className:"p-1 leading-none text-slate-500 hover:text-slate-900",onClick:e=>{e.stopPropagation(),M(U===a.id?null:a.id)},title:"More"},"⋯"),(0,e.createElement)("div",{className:"absolute right-0 z-20 mt-2 w-40 bg-white text-gray-800 border border-gray-200 rounded-[5px] shadow overflow-hidden "+(U===a.id?"block":"hidden")},(0,e.createElement)("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50",onClick:e=>{e.stopPropagation(),function(e){k(e.id),A({id:e.id,name:e.name,location:e.location||""})}(a),M(null)},title:"Edit"},"Edit"),(0,e.createElement)("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50 text-red-600",onClick:e=>{e.stopPropagation(),async function(e){if(!confirm("Delete this hotel?"))return;const t=new URLSearchParams({action:"nhsa_admin_delete_hotel",nonce:NHSA.nonce,id:String(e.id)});await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),s?.id===e.id&&(o(null),i([])),se()}(a),M(null)},title:"Delete"},"Delete"))))))),0===pe.length&&(0,e.createElement)("li",{className:"px-3 py-2 text-sm text-slate-500"},"No hotels found.")),0===a.length&&(0,e.createElement)("div",{className:"mt-3 text-xs text-slate-600"},'Create your first hotel using "Add Hotel".'))),(0,e.createElement)("main",{className:"flex-1"},s?(0,e.createElement)("div",{className:"space-y-6"},(0,e.createElement)("div",{className:"flex items-center gap-2 border-b border-gray-200"},(0,e.createElement)("button",{type:"button",className:"px-4 py-2 -mb-px border-b-2 "+("rooms"===K?"border-slate-900 text-slate-900":"border-transparent text-slate-500 hover:text-slate-900"),onClick:()=>Y("rooms")},"Rooms"),(0,e.createElement)("button",{type:"button",className:"px-4 py-2 -mb-px border-b-2 "+("types"===K?"border-slate-900 text-slate-900":"border-transparent text-slate-500 hover:text-slate-900"),onClick:()=>Y("types")},"Room Type Categories")),"rooms"===K&&(0,e.createElement)("div",{className:"space-y-4"},(0,e.createElement)("h3",{className:"text-lg font-semibold"},s.name," — Rooms"),(0,e.createElement)("div",{className:"flex items-center justify-between gap-2"},(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("label",{className:"text-sm text-slate-600"},"Sort by"),(0,e.createElement)("select",{className:"bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 text-sm focus:ring-2 focus:ring-[#ffd126] w-auto min-w-[140px] h-10",value:_,onChange:e=>{H(e.target.value),s&&oe(s)}},(0,e.createElement)("option",{value:"number"},"Room Number"),(0,e.createElement)("option",{value:"status"},"Status")),(0,e.createElement)("select",{className:"bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 text-sm focus:ring-2 focus:ring-[#ffd126] w-auto min-w-[90px] h-10",value:P,onChange:e=>{R(e.target.value),s&&oe(s)}},(0,e.createElement)("option",{value:"asc"},"Asc"),(0,e.createElement)("option",{value:"desc"},"Desc"))),(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("button",{className:"px-3 py-2 bg-slate-900 text-white rounded-[5px]",onClick:()=>I(!0)},"Add Room"))),(0,e.createElement)("table",{className:"min-w-full text-sm"},(0,e.createElement)("thead",{className:"text-left text-slate-500"},(0,e.createElement)("tr",null,(0,e.createElement)("th",{className:"py-2 pr-4"},"Room Number"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Room Type"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Status"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Price"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Description"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Actions"))),(0,e.createElement)("tbody",{className:"divide-y"},c.map(t=>(0,e.createElement)("tr",{key:t.id},(0,e.createElement)("td",{className:"py-2 pr-4"},t.number),(0,e.createElement)("td",{className:"py-2 pr-4 capitalize"},t.room_type),(0,e.createElement)("td",{className:"py-2 pr-4 capitalize"},"available"===t.status?(0,e.createElement)("span",{className:"px-2 py-1 rounded-full bg-emerald-100 text-emerald-700"},"Available"):"checked_in"===t.status?(0,e.createElement)("span",{className:"px-2 py-1 rounded-full bg-blue-100 text-blue-700"},"Checked-In"):(0,e.createElement)("span",{className:"px-2 py-1 rounded-full bg-red-100 text-red-700"},"Booked")),(0,e.createElement)("td",{className:"py-2 pr-4 w-28"},j===t.id?(0,e.createElement)("input",{type:"number",step:"0.01",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-2 py-1 focus:ring-2 focus:ring-[#ffd126]",value:L.price,onChange:e=>D({...L,price:e.target.value})}):(0,e.createElement)("span",null,"₱",(Number(t.price)||0).toLocaleString())),(0,e.createElement)("td",{className:"py-2 pr-4"},j===t.id?(0,e.createElement)("input",{type:"text",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-2 py-1 focus:ring-2 focus:ring-[#ffd126]",value:L.description,onChange:e=>D({...L,description:e.target.value})}):(0,e.createElement)("span",{className:"text-slate-700"},t.description||"")),(0,e.createElement)("td",{className:"py-2 pr-4"},j===t.id?(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("button",{className:"px-2 py-1 bg-slate-900 text-white rounded-[5px]",onClick:ue},"Save"),(0,e.createElement)("button",{className:"px-2 py-1 border border-gray-300 rounded-[5px]",onClick:de},"Cancel")):(0,e.createElement)("div",{className:"relative","data-room-menu":`room-${t.id}`},(0,e.createElement)("button",{type:"button",className:"px-2 py-1 rounded-[5px] border border-gray-300 bg-white hover:bg-gray-50",onClick:()=>$(O===t.id?null:t.id),title:"More"},"⋯"),(0,e.createElement)("div",{className:"absolute right-0 z-20 mt-2 w-40 bg-white text-gray-800 border border-gray-200 rounded-[5px] shadow overflow-hidden "+(O===t.id?"block":"hidden")},(0,e.createElement)("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50",onClick:()=>{!function(e){T(e.id),D({price:e.price||"",description:e.description||""})}(t),$(null)},title:"Edit"},"Edit"),(0,e.createElement)("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50 text-red-600",onClick:()=>{!async function(e){if(!e)return;if(!confirm("Delete this room?"))return;const t=new URLSearchParams({action:"nhsa_admin_delete_room",nonce:NHSA.nonce,id:String(e)});await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),s&&oe(s)}(t.id),$(null)},title:"Delete"},"Delete")))))),0===c.length&&(0,e.createElement)("tr",null,(0,e.createElement)("td",{colSpan:"6",className:"py-3 text-slate-500"},"No rooms yet."))))),"types"===K&&(0,e.createElement)("div",{className:"space-y-3"},(0,e.createElement)("div",{className:"flex items-center justify-between"},(0,e.createElement)("h3",{className:"text-lg font-semibold"},"Room Type Categories"),(0,e.createElement)("button",{type:"button",className:"px-3 py-2 border border-gray-300 rounded-[5px]",onClick:()=>q(!0)},"Create Room Type")),(0,e.createElement)("div",{className:"overflow-x-auto"},(0,e.createElement)("table",{className:"min-w-full text-sm"},(0,e.createElement)("thead",{className:"text-left text-slate-500"},(0,e.createElement)("tr",null,(0,e.createElement)("th",{className:"py-2 pr-4"},"Name"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Default Price"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Images"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Amenities"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Description"),(0,e.createElement)("th",{className:"py-2 pr-4"},"Actions"))),(0,e.createElement)("tbody",{className:"divide-y"},V.map(t=>(0,e.createElement)("tr",{key:t.id},(0,e.createElement)("td",{className:"py-2 pr-4"},t.name),(0,e.createElement)("td",{className:"py-2 pr-4"},t.price?`₱${Number(t.price).toLocaleString()}`:"-"),(0,e.createElement)("td",{className:"py-2 pr-4"},Array.isArray(t.images)&&t.images.length>0?`${t.images.length} image(s)`:"-"),(0,e.createElement)("td",{className:"py-2 pr-4"},Array.isArray(t.amenities)&&t.amenities.length>0?t.amenities.join(", "):"-"),(0,e.createElement)("td",{className:"py-2 pr-4"},t.description||""),(0,e.createElement)("td",{className:"py-2 pr-4"},(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)("button",{className:"p-2 rounded-lg hover:bg-slate-100",title:"Edit",onClick:()=>{te({id:t.id,name:t.name||"",price:String(t.price||""),description:t.description||"",amenities:Array.isArray(t.amenities)?t.amenities:[],images:Array.isArray(t.images)?t.images:[]}),Q(!0)}},"Edit"),(0,e.createElement)("button",{className:"p-2 rounded-lg hover:bg-slate-100",title:"Duplicate",onClick:()=>{const e={id:0,name:`${t.name} (Copy)`,price:String(t.price||""),description:t.description||"",amenities:Array.isArray(t.amenities)?[...t.amenities]:[],images:Array.isArray(t.images)?[...t.images]:[]};te(e),Q(!0)}},"Duplicate"),(0,e.createElement)("button",{className:"p-2 rounded-lg hover:bg-slate-100 text-red-600",title:"Delete",onClick:()=>{le(t),ne(!0)}},"Delete"))))),0===V.length&&(0,e.createElement)("tr",null,(0,e.createElement)("td",{colSpan:"6",className:"py-3 text-slate-500"},"No room type categories."))))))):(0,e.createElement)("div",{className:"text-sm text-slate-500"},"Select a hotel to manage rooms."))),v&&s&&(0,e.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4 w-full max-w-xl"},(0,e.createElement)("div",{className:"flex items-center justify-between mb-2"},(0,e.createElement)("h3",{className:"text-lg font-semibold"},"Add Rooms (Bulk) — ",s.name),(0,e.createElement)("button",{className:"text-slate-500",onClick:()=>E(!1)},"✕")),(0,e.createElement)("div",{className:"space-y-3"},(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-center"},(0,e.createElement)("label",{className:"text-sm text-slate-600"},"Room Range"),(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 md:col-span-2 focus:ring-2 focus:ring-[#ffd126]",placeholder:"e.g., 101-110",value:N.range,onChange:e=>w({...N,range:e.target.value})})),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-center"},(0,e.createElement)("label",{className:"text-sm text-slate-600"},"Room Type"),(0,e.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 md:col-span-2 focus:ring-2 focus:ring-[#ffd126]",value:N.type,onChange:e=>w({...N,type:e.target.value})},(0,e.createElement)("option",{value:"standard"},"Standard"),(0,e.createElement)("option",{value:"deluxe"},"Deluxe"),(0,e.createElement)("option",{value:"suite"},"Suite"))),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-center"},(0,e.createElement)("label",{className:"text-sm text-slate-600"},"Price (PHP)"),(0,e.createElement)("input",{type:"number",step:"0.01",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 md:col-span-2 focus:ring-2 focus:ring-[#ffd126]",placeholder:"e.g., 2200",value:N.price||"",onChange:e=>w({...N,price:e.target.value})})),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-center"},(0,e.createElement)("label",{className:"text-sm text-slate-600"},"Description"),(0,e.createElement)("input",{type:"text",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 md:col-span-2 focus:ring-2 focus:ring-[#ffd126]",placeholder:"Short description",value:N.description||"",onChange:e=>w({...N,description:e.target.value})})),(0,e.createElement)("div",{className:"flex justify-end gap-2 pt-2"},(0,e.createElement)("button",{className:"px-3 py-2 rounded-[5px] border border-gray-300",onClick:()=>E(!1)},"Cancel"),(0,e.createElement)("button",{className:"px-3 py-2 bg-slate-900 text-white rounded-[5px]",onClick:async()=>{const e=new URLSearchParams({action:"nhsa_admin_add_rooms_bulk",nonce:NHSA.nonce,hotel_id:String(s.id),range:N.range,room_type:N.type,price:String(N.price||""),description:String(N.description||"")});await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),E(!1),w({range:"",type:"standard",price:"",description:""}),oe(s)}},"Create"))))),B&&(0,e.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4 w-full max-w-xl"},(0,e.createElement)("div",{className:"flex items-center justify-between mb-2"},(0,e.createElement)("h3",{className:"text-lg font-semibold"},"Add Room — ",s?.name||""),(0,e.createElement)("button",{className:"text-slate-500",onClick:()=>I(!1)},"✕")),(0,e.createElement)("form",{onSubmit:async function(e){e.preventDefault(),d(!0);let t="",a="";try{const e=V.find(e=>(e.slug||e.name)===u.type);e&&(void 0!==e.price&&null!==e.price&&""!==e.price&&(t=String(e.price)),e.description&&(a=String(e.description)))}catch(e){}const n=new URLSearchParams({action:"nhsa_admin_add_room",nonce:NHSA.nonce,hotel_id:String(s.id),room_number:u.number,room_type:u.type,price:t,description:a}),r=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}),l=await r.json();d(!1),l?.success&&(p({number:"",type:""}),oe(s),I(!1))},className:"grid grid-cols-1 md:grid-cols-2 gap-3"},(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Room Number"),(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",placeholder:"e.g., 101",value:u.number,onChange:e=>p({...u,number:e.target.value}),required:!0})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Room Type"),(0,e.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:u.type,onChange:e=>p({...u,type:e.target.value}),required:!0},(0,e.createElement)("option",{value:""},"Select type"),V.map(t=>(0,e.createElement)("option",{key:t.id,value:t.slug||t.name},t.name)))),(0,e.createElement)("div",{className:"md:col-span-2 flex justify-end gap-2 pt-1"},(0,e.createElement)("button",{type:"button",className:"px-3 py-2 rounded-[5px] border border-gray-300",onClick:()=>I(!1)},"Cancel"),(0,e.createElement)("button",{className:"px-3 py-2 bg-slate-900 text-white rounded-[5px]",disabled:m},m?"Adding...":"Create Room"))))),W&&(0,e.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4 w-full max-w-md"},(0,e.createElement)("div",{className:"flex items-center justify-between mb-2"},(0,e.createElement)("h3",{className:"text-lg font-semibold"},"Create Room Type"),(0,e.createElement)("button",{className:"text-slate-500",onClick:()=>q(!1)},"✕")),(0,e.createElement)("form",{onSubmit:async e=>{e.preventDefault();const t=new URLSearchParams({action:"nhsa_admin_add_room_type",nonce:NHSA.nonce,name:z.name,price:String(z.price||""),description:z.description||"",amenities:JSON.stringify(Array.isArray(z.amenities)?z.amenities:[]),images:JSON.stringify(Array.isArray(z.images)?z.images:[])}),a=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),n=await a.json();if(n?.success){F({name:"",price:"",description:"",amenities:[],images:[]}),q(!1);try{const e=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"nhsa_admin_list_room_types",nonce:NHSA.nonce})}),t=await e.json();J(t?.data?.room_types||[])}catch(e){}}},className:"grid grid-cols-1 gap-3"},(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Name"),(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:z.name,onChange:e=>F({...z,name:e.target.value}),placeholder:"e.g., Deluxe",required:!0})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Default Price (PHP)"),(0,e.createElement)("input",{type:"number",step:"0.01",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:z.price,onChange:e=>F({...z,price:e.target.value}),placeholder:"e.g., 2500"})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Description"),(0,e.createElement)("textarea",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",rows:"3",value:z.description,onChange:e=>F({...z,description:e.target.value}),placeholder:"Short description"})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Amenities"),(0,e.createElement)(De,{value:z.amenities,onChange:e=>F({...z,amenities:e})})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Images (URLs, optional)"),(0,e.createElement)(Ue,{value:z.images,onChange:e=>F({...z,images:e})})),(0,e.createElement)("div",{className:"flex justify-end gap-2 pt-1"},(0,e.createElement)("button",{type:"button",className:"px-3 py-2 rounded-[5px] border border-gray-300",onClick:()=>q(!1)},"Cancel"),(0,e.createElement)("button",{className:"px-3 py-2 bg-slate-900 text-white rounded-[5px]"},"Create"))))),Z&&(0,e.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4 w-full max-w-md"},(0,e.createElement)("div",{className:"flex items-center justify-between mb-2"},(0,e.createElement)("h3",{className:"text-lg font-semibold"},"Edit Room Type"),(0,e.createElement)("button",{className:"text-slate-500",onClick:()=>Q(!1)},"✕")),(0,e.createElement)("form",{onSubmit:async e=>{e.preventDefault();const t=!ee.id,a=new URLSearchParams({action:t?"nhsa_admin_add_room_type":"nhsa_admin_update_room_type",nonce:NHSA.nonce,...t?{}:{id:String(ee.id)},name:ee.name,price:String(ee.price||""),description:ee.description||"",amenities:JSON.stringify(Array.isArray(ee.amenities)?ee.amenities:[]),images:JSON.stringify(Array.isArray(ee.images)?ee.images:[])});await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a}),Q(!1),s&&oe(s)},className:"grid grid-cols-1 gap-3"},(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Name"),(0,e.createElement)("input",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:ee.name,onChange:e=>te({...ee,name:e.target.value}),required:!0})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Default Price (PHP)"),(0,e.createElement)("input",{type:"number",step:"0.01",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:ee.price,onChange:e=>te({...ee,price:e.target.value})})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Description"),(0,e.createElement)("textarea",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",rows:"3",value:ee.description,onChange:e=>te({...ee,description:e.target.value})})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Amenities"),(0,e.createElement)(De,{value:ee.amenities,onChange:e=>te({...ee,amenities:e})})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"Images (URLs, optional)"),(0,e.createElement)(Ue,{value:ee.images,onChange:e=>te({...ee,images:e})})),(0,e.createElement)("div",{className:"flex justify-end gap-2 pt-1"},(0,e.createElement)("button",{type:"button",className:"px-3 py-2 rounded-[5px] border border-gray-300",onClick:()=>Q(!1)},"Cancel"),(0,e.createElement)("button",{className:"px-3 py-2 bg-slate-900 text-white rounded-[5px]"},"Save"))))),ae&&re&&(0,e.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4 w-full max-w-md"},(0,e.createElement)("div",{className:"flex items-center justify-between mb-2"},(0,e.createElement)("h3",{className:"text-lg font-semibold"},"Delete Room Type"),(0,e.createElement)("button",{className:"text-slate-500",onClick:()=>ne(!1)},"✕")),(0,e.createElement)("div",{className:"text-sm text-slate-700"},'Are you sure you want to delete "',re.name,'"?'),(0,e.createElement)("div",{className:"flex justify-end gap-2 pt-4"},(0,e.createElement)("button",{className:"px-3 py-2 rounded-[5px] border border-gray-300",onClick:()=>ne(!1)},"Cancel"),(0,e.createElement)("button",{className:"px-3 py-2 bg-red-600 text-white rounded-[5px]",onClick:async()=>{const e=new URLSearchParams({action:"nhsa_admin_delete_room_type",nonce:NHSA.nonce,id:String(re.id)});await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),ne(!1),le(null),s&&oe(s)}},"Delete")))))},$e=()=>{const t="undefined"!=typeof NHSA&&NHSA.options?NHSA.options:{},[a,n]=(0,e.useState)({booking_created:t.booking_created||"",guest_checked_in:t.guest_checked_in||"",guest_checked_out:t.guest_checked_out||"",payment_received:t.payment_received||""}),[r,l]=(0,e.useState)(!1),[s,o]=(0,e.useState)("");return(0,e.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4"},(0,e.createElement)("h2",{className:"text-xl font-semibold mb-4"},"Automation"),(0,e.createElement)("div",{className:"grid gap-4"},[["booking_created","Booking Created"],["guest_checked_in","Guest Checked In"],["guest_checked_out","Guest Checked Out"],["payment_received","Payment Received"]].map(([t,r])=>(0,e.createElement)("div",{key:t},(0,e.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},r," Webhook URL"),(0,e.createElement)("input",{type:"url",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:a[t],onChange:e=>n({...a,[t]:e.target.value}),placeholder:"https://hook.eu1.make.com/..."}))),(0,e.createElement)("div",{className:"flex items-center gap-3"},(0,e.createElement)("button",{onClick:async()=>{l(!0),o("");const e=new URLSearchParams({action:"nhsa_save_settings",nonce:NHSA.nonce,...a}),t=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),n=await t.json();l(!1),o(n?.data?.message||n?.message||(n?.success?"Saved":"Error"))},disabled:r,className:"px-4 py-2 bg-slate-900 text-white rounded-[5px]"},r?"Saving...":"Save Settings"),s&&(0,e.createElement)("div",{className:"text-sm text-slate-600"},s))))},Be=Ee("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]),Ie=Ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),We=Ee("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function qe(){const[a,n]=(0,e.useState)(!0),[r,l]=(0,e.useState)(!1),[s,o]=(0,e.useState)({enablePromo:!0,defaultBranch:"",taxRate:12,buttonLabel:"Check Availability"}),[c,i]=(0,e.useState)([]),[m,d]=(0,e.useState)("form"),u="undefined"!=typeof NHSA&&(NHSA.options?.gumroad_key||NHSA.options?.license_key)?NHSA.options?.gumroad_key||NHSA.options?.license_key:"",p="undefined"!=typeof NHSA&&NHSA.options?.license_status?NHSA.options.license_status:"inactive",[h,g]=(0,e.useState)(u),[x,y]=(0,e.useState)(p),[b,f]=(0,e.useState)(!1),[v,E]=(0,e.useState)(""),[N,w]=(0,e.useState)({paypalEnabled:!1,paypalMode:"sandbox",paypalClientId:"",paypalSecret:"",accountType:"business"}),[S,k]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{!async function(){try{const[e,t,a]=await Promise.all([fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"nhsa_get_booking_form_settings",nonce:NHSA.nonce})}),fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"nhsa_admin_list_hotels",nonce:NHSA.nonce})}),fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"nhsa_get_payment_settings",nonce:NHSA.nonce})})]),n=await e.json(),r=await t.json(),l=await a.json();n.success&&n.data&&o(n.data),i(r?.data?.hotels||[]),l?.success&&l?.data&&w({paypalEnabled:!!l.data.paypalEnabled,paypalMode:l.data.paypalMode||"sandbox",paypalClientId:l.data.paypalClientId||"",paypalSecret:l.data.paypalSecret||"",accountType:l.data.accountType||"business"})}finally{n(!1)}}()},[]),a?(0,t.createElement)("div",{className:"p-4"},"Loading…"):(0,t.createElement)("div",{className:"bg-white rounded-[5px] shadow p-4"},(0,t.createElement)("div",{className:"flex flex-col md:flex-row gap-6"},(0,t.createElement)("aside",{className:"md:w-72 w-full"},(0,t.createElement)("div",{className:"border border-gray-200 rounded-[5px] p-3"},(0,t.createElement)("ul",{className:"mt-2 divide-y"},(0,t.createElement)("li",null,(0,t.createElement)("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-[5px] "+("form"===m?"bg-slate-900 text-white":"hover:bg-slate-100"),onClick:()=>d("form")},(0,t.createElement)("div",{className:"inline-flex items-center gap-2"},(0,t.createElement)(Ae,{className:"w-4 h-4"}),(0,t.createElement)("span",null,"Form Settings")))),(0,t.createElement)("li",null,(0,t.createElement)("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-[5px] "+("booking"===m?"bg-slate-900 text-white":"hover:bg-slate-100"),onClick:()=>d("booking")},(0,t.createElement)("div",{className:"inline-flex items-center gap-2"},(0,t.createElement)(Be,{className:"w-4 h-4"}),(0,t.createElement)("span",null,"Booking Integration")))),(0,t.createElement)("li",null,(0,t.createElement)("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-[5px] "+("payment"===m?"bg-slate-900 text-white":"hover:bg-slate-100"),onClick:()=>d("payment")},(0,t.createElement)("div",{className:"inline-flex items-center gap-2"},(0,t.createElement)(Ie,{className:"w-4 h-4"}),(0,t.createElement)("span",null,"Payment Integration")))),(0,t.createElement)("li",null,(0,t.createElement)("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-[5px] "+("license"===m?"bg-slate-900 text-white":"hover:bg-slate-100"),onClick:()=>d("license")},(0,t.createElement)("div",{className:"inline-flex items-center gap-2"},(0,t.createElement)(We,{className:"w-4 h-4"}),(0,t.createElement)("span",null,"License"))))))),(0,t.createElement)("main",{className:"flex-1"},"form"===m&&(0,t.createElement)("div",{className:"rounded-[5px] border border-gray-200 p-4"},(0,t.createElement)("h2",{className:"text-xl font-semibold mb-4"},"Form Settings"),(0,t.createElement)("div",{className:"grid md:grid-cols-2 gap-4"},(0,t.createElement)("label",{className:"block"},(0,t.createElement)("span",{className:"block text-sm text-gray-700 mb-1"},"Enable Promo Code"),(0,t.createElement)("input",{type:"checkbox",className:"rounded-[5px]",checked:s.enablePromo,onChange:e=>o({...s,enablePromo:e.target.checked})})),(0,t.createElement)("label",{className:"block"},(0,t.createElement)("span",{className:"block text-sm text-gray-700 mb-1"},"Default Branch"),(0,t.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:s.defaultBranch,onChange:e=>o({...s,defaultBranch:e.target.value})},(0,t.createElement)("option",{value:""},"None"),c.map(e=>(0,t.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,t.createElement)("label",{className:"block"},(0,t.createElement)("span",{className:"block text-sm text-gray-700 mb-1"},"Tax Rate (%)"),(0,t.createElement)("input",{type:"number",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:s.taxRate,onChange:e=>o({...s,taxRate:Number(e.target.value||0)})})),(0,t.createElement)("label",{className:"block"},(0,t.createElement)("span",{className:"block text-sm text-gray-700 mb-1"},"Button Label"),(0,t.createElement)("input",{type:"text",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:s.buttonLabel,onChange:e=>o({...s,buttonLabel:e.target.value})}))),(0,t.createElement)("div",{className:"mt-4"},(0,t.createElement)("button",{className:"px-4 py-2 bg-slate-900 text-white rounded-[5px]",onClick:async function(){l(!0);try{const e=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"nhsa_save_booking_form_settings",nonce:NHSA.nonce,payload:JSON.stringify(s)})});await e.json()}finally{l(!1)}},disabled:r},r?"Saving…":"Save Settings"))),"booking"===m&&(0,t.createElement)("div",{className:"rounded-[5px] border border-gray-200 p-4"},(0,t.createElement)("h2",{className:"text-xl font-semibold mb-2"},"Booking Integration"),(0,t.createElement)("p",{className:"text-sm text-slate-600"},"Configure webhooks and external booking integrations here."),(0,t.createElement)("div",{className:"mt-3 grid gap-3"},(0,t.createElement)("label",{className:"block"},(0,t.createElement)("span",{className:"block text-sm text-gray-700 mb-1"},"Booking Created Webhook URL"),(0,t.createElement)("input",{type:"url",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",placeholder:"https://example.com/webhook",disabled:!0})),(0,t.createElement)("label",{className:"block"},(0,t.createElement)("span",{className:"block text-sm text-gray-700 mb-1"},"Other Integrations"),(0,t.createElement)("input",{type:"text",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",placeholder:"Coming soon",disabled:!0})))),"payment"===m&&(0,t.createElement)("div",{className:"rounded-[5px] border border-gray-200 p-4"},(0,t.createElement)("h2",{className:"text-xl font-semibold mb-2"},"Payment Integration"),(0,t.createElement)("p",{className:"text-sm text-slate-600"},"Connect PayPal for online payments. Supports personal or business accounts via API credentials."),(0,t.createElement)("div",{className:"mt-3 grid gap-3 max-w-xl"},(0,t.createElement)("label",{className:"inline-flex items-center gap-2"},(0,t.createElement)("input",{type:"checkbox",checked:!!N.paypalEnabled,onChange:e=>w({...N,paypalEnabled:e.target.checked})}),(0,t.createElement)("span",{className:"text-sm"},"Enable PayPal")),(0,t.createElement)("label",{className:"block"},(0,t.createElement)("span",{className:"block text-sm text-gray-700 mb-1"},"Payment Method"),(0,t.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:N.paymentMethod||"branch",onChange:e=>w({...N,paymentMethod:e.target.value})},(0,t.createElement)("option",{value:"online"},"Online (PayPal)"),(0,t.createElement)("option",{value:"branch"},"Pay at Branch"))),(0,t.createElement)("label",{className:"block"},(0,t.createElement)("span",{className:"block text-sm text-gray-700 mb-1"},"Account Type"),(0,t.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:N.accountType,onChange:e=>w({...N,accountType:e.target.value})},(0,t.createElement)("option",{value:"personal"},"Personal"),(0,t.createElement)("option",{value:"business"},"Business"))),(0,t.createElement)("label",{className:"block"},(0,t.createElement)("span",{className:"block text-sm text-gray-700 mb-1"},"Mode"),(0,t.createElement)("select",{className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:N.paypalMode,onChange:e=>w({...N,paypalMode:e.target.value})},(0,t.createElement)("option",{value:"sandbox"},"Sandbox (test)"),(0,t.createElement)("option",{value:"live"},"Live"))),(0,t.createElement)("label",{className:"block"},(0,t.createElement)("span",{className:"block text-sm text-gray-700 mb-1"},"PayPal Client ID"),(0,t.createElement)("input",{type:"text",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:N.paypalClientId,onChange:e=>w({...N,paypalClientId:e.target.value}),placeholder:"Your PayPal REST Client ID"})),(0,t.createElement)("label",{className:"block"},(0,t.createElement)("span",{className:"block text-sm text-gray-700 mb-1"},"PayPal Secret"),(0,t.createElement)("input",{type:"password",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:N.paypalSecret,onChange:e=>w({...N,paypalSecret:e.target.value}),placeholder:"Your PayPal REST Secret"})),(0,t.createElement)("div",null,(0,t.createElement)("button",{className:"px-4 py-2 bg-slate-900 text-white rounded-[5px]",disabled:S,onClick:async()=>{k(!0);try{const e=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"nhsa_save_payment_settings",nonce:NHSA.nonce,payload:JSON.stringify(N)})});await e.json()}finally{k(!1)}}},S?"Saving…":"Save Payment Settings")))),"license"===m&&(0,t.createElement)("div",{className:"rounded-[5px] border border-gray-200 p-4"},(0,t.createElement)("h2",{className:"text-xl font-semibold mb-2"},"License"),(0,t.createElement)("div",{className:"grid gap-4 max-w-xl"},(0,t.createElement)("div",null,(0,t.createElement)("label",{className:"block text-sm text-slate-600 mb-1"},"License Key"),(0,t.createElement)("input",{type:"text",className:"w-full bg-white text-gray-800 border border-gray-300 rounded-[5px] px-3 py-2 focus:ring-2 focus:ring-[#ffd126]",value:h,onChange:e=>g(e.target.value),placeholder:"XXXX-XXXX-XXXX-XXXX"})),(0,t.createElement)("div",{className:"flex items-center gap-3"},"active"===x?(0,t.createElement)("button",{onClick:async function(){f(!0),E("");const e=new URLSearchParams({action:"nhsa_gumroad_deactivate",nonce:NHSA.nonce}),t=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),a=await t.json();if(f(!1),a.success){y(a.data?.status||"inactive"),"undefined"!=typeof NHSA&&NHSA.options&&(NHSA.options.gumroad_key="");try{window.dispatchEvent(new CustomEvent("nhsa-license-updated",{detail:{status:a.data?.status||"inactive",trialEnd:""}}))}catch(e){}}else E(a?.data?.message||a?.message||"Connection error. Please try again.")},disabled:b,className:"px-4 py-2 bg-red-600 text-white rounded-[5px]"},b?"Processing…":"Deactivate"):(0,t.createElement)("button",{onClick:async function(){f(!0),E("");const e=new URLSearchParams({action:"nhsa_gumroad_activate",nonce:NHSA.nonce,license_key:h}),t=await fetch(NHSA.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),a=await t.json();if(f(!1),a.success){y(a.data?.status||"active"),"undefined"!=typeof NHSA&&NHSA.options&&(NHSA.options.gumroad_key=h);try{window.dispatchEvent(new CustomEvent("nhsa-license-updated",{detail:{status:a.data?.status,trialEnd:a.data?.trialEnd||""}}))}catch(e){}}else{const e=a?.data&&(a.data.message||a.data.error)||a?.message||"Connection error. Please try again.";E(e)}},disabled:b,className:"px-4 py-2 bg-slate-900 text-white rounded-[5px]"},b?"Processing…":"Activate"),(0,t.createElement)("div",{className:"text-sm "+("active"===x?"text-emerald-600":"expired"===x?"text-amber-600":"text-slate-600")},"Status: ",x?x.charAt(0).toUpperCase()+x.slice(1):"Inactive")),v&&(0,t.createElement)("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-[5px] px-3 py-2"},v))))))}const ze=()=>{const[t,a]=(0,e.useState)([]),[n,r]=(0,e.useState)(!0),[l,s]=(0,e.useState)({user:"",action:"",from:"",to:""}),[o,c]=(0,e.useState)([]),i="undefined"!=typeof NHSA&&NHSA.currentUserCaps&&(NHSA.currentUserCaps.view_logs||NHSA.currentUserCaps.manage_settings)||!1,m=(0,e.useRef)(null);return(0,e.useEffect)(()=>{if(!i)return void r(!1);const e="undefined"!=typeof NHSA&&NHSA.rest&&NHSA.rest.root?NHSA.rest.root:"undefined"!=typeof NHSA&&NHSA.root?NHSA.root:"/wp-json/",t=new URLSearchParams;l.user&&t.set("user",String(l.user)),l.action&&t.set("action",String(l.action)),l.from&&t.set("from",String(l.from)),l.to&&t.set("to",String(l.to));const n=e+"nichehotel/v1/activity-logs"+(t.toString()?"?"+t.toString():""),s="undefined"!=typeof NHSA&&NHSA.rest&&NHSA.rest.nonce?NHSA.rest.nonce:"undefined"!=typeof NHSA&&NHSA.nonce?NHSA.nonce:"";let o=!1;function c(){try{m.current&&m.current.abort(),m.current=new AbortController;const e=n+(n.includes("?")?"&":"?")+"_ts="+Date.now();return fetch(e,{credentials:"same-origin",headers:{"X-WP-Nonce":s},signal:m.current.signal}).then(e=>e.ok?e.json():Promise.reject(e)).then(e=>{if(o)return;const t=Array.isArray(e.logs)?e.logs:[];a(e=>e&&e.length===t.length&&e[0]&&t[0]&&e[0].id===t[0].id?e:t),r(!1)}).catch(()=>{o||r(!1)})}catch(e){r(!1)}}c();const d=setInterval(c,5e3);return()=>{o=!0,clearInterval(d),m.current&&m.current.abort()}},[i,l.user,l.action,l.from,l.to]),(0,e.useEffect)(()=>{if(!i)return;const e=("undefined"!=typeof NHSA&&NHSA.rest&&NHSA.rest.root?NHSA.rest.root:"undefined"!=typeof NHSA&&NHSA.root?NHSA.root:"/wp-json/")+"nichehotel/v1/activity-actions?_ts="+Date.now(),t="undefined"!=typeof NHSA&&NHSA.rest&&NHSA.rest.nonce?NHSA.rest.nonce:"undefined"!=typeof NHSA&&NHSA.nonce?NHSA.nonce:"";fetch(e,{credentials:"same-origin",headers:{"X-WP-Nonce":t}}).then(e=>e.ok?e.json():Promise.reject(e)).then(e=>{Array.isArray(e.actions)&&c(e.actions)}).catch(()=>{})},[i]),i?(0,e.createElement)("div",{className:"p-4"},(0,e.createElement)("h2",{className:"text-xl font-semibold mb-3"},"Activity Logs"),(0,e.createElement)("div",{className:"mb-3 flex flex-wrap items-end gap-2"},(0,e.createElement)("div",{className:"min-w-[200px]"},(0,e.createElement)("label",{className:"block text-xs text-slate-600 mb-1"},"User"),(0,e.createElement)("input",{type:"text",value:l.user,onChange:e=>s(t=>({...t,user:e.target.value})),className:"border rounded px-2 py-1 text-sm w-full",placeholder:"ID or Name"})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-xs text-slate-600 mb-1"},"Action"),(0,e.createElement)("select",{value:l.action,onChange:e=>s(t=>({...t,action:e.target.value})),className:"border rounded px-2 py-1 text-sm min-w-[220px]"},(0,e.createElement)("option",{value:""},"All"),o.map(t=>(0,e.createElement)("option",{key:t,value:t},t)))),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-xs text-slate-600 mb-1"},"From"),(0,e.createElement)("input",{type:"date",value:l.from,onChange:e=>s(t=>({...t,from:e.target.value})),className:"border rounded px-2 py-1 text-sm"})),(0,e.createElement)("div",null,(0,e.createElement)("label",{className:"block text-xs text-slate-600 mb-1"},"To"),(0,e.createElement)("input",{type:"date",value:l.to,onChange:e=>s(t=>({...t,to:e.target.value})),className:"border rounded px-2 py-1 text-sm"})),(0,e.createElement)("div",{className:"ml-auto"},(0,e.createElement)("a",{href:function(){const e="undefined"!=typeof NHSA&&NHSA.rest&&NHSA.rest.root?NHSA.rest.root:"undefined"!=typeof NHSA&&NHSA.root?NHSA.root:"/wp-json/",t=new URLSearchParams;return l.user&&t.set("user",String(l.user)),l.action&&t.set("action",String(l.action)),l.from&&t.set("from",String(l.from)),l.to&&t.set("to",String(l.to)),t.set("_wpnonce","undefined"!=typeof NHSA&&NHSA.rest&&NHSA.rest.nonce?NHSA.rest.nonce:""),e+"nichehotel/v1/activity-logs/export"+(t.toString()?"?"+t.toString():"")}(),className:"inline-flex items-center px-3 py-1.5 rounded bg-slate-900 text-white text-sm"},"Export CSV"))),n?(0,e.createElement)("div",{className:"text-sm text-slate-600"},"Loading..."):(0,e.createElement)("div",{className:"overflow-auto max-h-[70vh]"},(0,e.createElement)("table",{className:"min-w-[800px] w-full border border-slate-200"},(0,e.createElement)("thead",{className:"bg-slate-50"},(0,e.createElement)("tr",null,(0,e.createElement)("th",{className:"text-left text-xs font-semibold text-slate-600 uppercase tracking-wide p-2 border-b border-slate-200"},"User"),(0,e.createElement)("th",{className:"text-left text-xs font-semibold text-slate-600 uppercase tracking-wide p-2 border-b border-slate-200"},"Action"),(0,e.createElement)("th",{className:"text-left text-xs font-semibold text-slate-600 uppercase tracking-wide p-2 border-b border-slate-200"},"Details"),(0,e.createElement)("th",{className:"text-left text-xs font-semibold text-slate-600 uppercase tracking-wide p-2 border-b border-slate-200"},"Timestamp"))),(0,e.createElement)("tbody",null,t.map(t=>(0,e.createElement)("tr",{key:t.id,className:"odd:bg-white even:bg-slate-50"},(0,e.createElement)("td",{className:"p-2 align-top text-sm text-slate-800"},String(t.user_name||t.user_id||"")),(0,e.createElement)("td",{className:"p-2 align-top text-sm text-slate-800"},String(t.action||"")),(0,e.createElement)("td",{className:"p-2 align-top text-sm text-slate-800 whitespace-pre-wrap break-words"},String(t.details||"")),(0,e.createElement)("td",{className:"p-2 align-top text-sm text-slate-800"},function(){const e=String(t.timestamp||"");if(!e)return"";const a=new Date(e.replace(" ","T"));if(isNaN(a.getTime()))return e;let n=a.getHours();const r=String(a.getMinutes()).padStart(2,"0"),l=n>=12?"PM":"AM";return n%=12,0===n&&(n=12),`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")} ${n}:${r} ${l}`}()))),(!t||0===t.length)&&(0,e.createElement)("tr",null,(0,e.createElement)("td",{colSpan:"4",className:"p-4 text-sm text-slate-600 text-center"},"No logs found.")))))):(0,e.createElement)("div",{className:"p-4"},(0,e.createElement)("h2",{className:"text-xl font-semibold mb-3"},"Activity Logs"),(0,e.createElement)("div",{className:"text-sm text-slate-600"},"You do not have permission to view logs."))},Fe=({children:t})=>{const a=V(),n=z();return(0,e.useEffect)(()=>{const e="undefined"!=typeof NHSA&&NHSA.initialRoute?NHSA.initialRoute:"/";"/"===(n.pathname||"/")&&e&&"/"!==e&&a(e,{replace:!0})},[]),t},Ve=document.getElementById("nhsa-admin-app");Ve&&(0,e.render)((0,e.createElement)(()=>(0,e.createElement)(ue,null,(0,e.createElement)(Fe,null,(0,e.createElement)(He,null,(0,e.createElement)(se,null,(0,e.createElement)(re,{path:"/",element:(0,e.createElement)(je,null)}),(0,e.createElement)(re,{path:"/bookings",element:(0,e.createElement)(Te,null)}),(0,e.createElement)(re,{path:"/rooms",element:(0,e.createElement)(Oe,null)}),(0,e.createElement)(re,{path:"/settings",element:(0,e.createElement)(qe,null)}),(0,e.createElement)(re,{path:"/automation",element:(0,e.createElement)($e,null)}),(0,e.createElement)(re,{path:"/activity-logs",element:(0,e.createElement)(ze,null)}),(0,e.createElement)(re,{path:"*",element:(0,e.createElement)(ne,{to:"/",replace:!0})}))))),null),Ve)})();